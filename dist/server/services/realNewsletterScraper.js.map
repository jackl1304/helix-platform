{"version":3,"file":"realNewsletterScraper.js","sourceRoot":"","sources":["../../../server/services/realNewsletterScraper.ts"],"names":[],"mappings":"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","sourcesContent":["import { Logger } from './logger.service';\r\nimport * as cheerio from 'cheerio';\r\nimport axios from 'axios';\r\n\r\nconst logger = new Logger('RealNewsletterScraper');\r\n\r\nexport interface NewsletterSource {\r\n  id: string;\r\n  name: string;\r\n  url: string;\r\n  description: string;\r\n  requiresAuth: boolean;\r\n  category: 'industry_newsletter' | 'regulatory_newsletter' | 'market_analysis';\r\n  status: 'active' | 'configured';\r\n  credentials?: {\r\n    email?: string;\r\n    password?: string;\r\n  };\r\n}\r\n\r\nexport interface ScrapedArticle {\r\n  source_name: string;\r\n  article_title: string;\r\n  article_url: string;\r\n  publication_date: string;\r\n  author?: string;\r\n  content_text: string;\r\n  content_html?: string;\r\n  keywords?: string[];\r\n  is_gated: boolean;\r\n  scrape_timestamp: string;\r\n}\r\n\r\nexport class RealNewsletterScraper {\r\n  private sources: NewsletterSource[] = [\r\n    {\r\n      id: 'medtech_dive',\r\n      name: 'MedTech Dive',\r\n      url: 'https://www.medtechdive.com/',\r\n      description: 'Tägliche Nachrichten und Einblicke in die Medizintechnikbranche',\r\n      requiresAuth: false,\r\n      category: 'industry_newsletter',\r\n      status: 'active'\r\n    },\r\n    {\r\n      id: 'medtech_europe',\r\n      name: 'MedTech Europe Newsletter',\r\n      url: 'https://www.medtecheurope.org/medtech-views/newsletters/',\r\n      description: 'Monatliche Newsletter mit umfassender Berichterstattung über den Medizintechniksektor',\r\n      requiresAuth: true,\r\n      category: 'regulatory_newsletter',\r\n      status: 'active',\r\n      credentials: {\r\n        email: 'helix@medtech-intelligence.com',\r\n        password: '[configured]'\r\n      }\r\n    },\r\n    {\r\n      id: 'medical_device_network',\r\n      name: 'Medical Device Network Newsletter',\r\n      url: 'https://www.medicaldevice-network.com/all-newsletters/',\r\n      description: 'Tägliche Nachrichten-Digest über medizinische Geräte',\r\n      requiresAuth: true,\r\n      category: 'industry_newsletter',\r\n      status: 'configured'\r\n    },\r\n    {\r\n      id: 'medtech_strategist',\r\n      name: 'MedTech Strategist Newsletter',\r\n      url: 'https://www.medtechstrategist.com/medtech-strategist-newsletter',\r\n      description: 'Umfassende globale Berichterstattung über Trends im Bereich der medizinischen Geräte',\r\n      requiresAuth: true,\r\n      category: 'market_analysis',\r\n      status: 'configured'\r\n    },\r\n    {\r\n      id: 'bioworld',\r\n      name: 'BioWorld Newsletter',\r\n      url: 'https://www.bioworld.com/',\r\n      description: 'Nachrichten und Analysen für die globale Biotechnologie-, Pharma- und Medizintechnikindustrie',\r\n      requiresAuth: true,\r\n      category: 'market_analysis',\r\n      status: 'configured'\r\n    },\r\n    {\r\n      id: 'medtech_insights',\r\n      name: 'Med-Tech Insights Newsletter',\r\n      url: 'https://med-techinsights.com/',\r\n      description: 'Neueste Nachrichten, Expertenanalysen und Branchentrends in der Medizintechnik',\r\n      requiresAuth: true,\r\n      category: 'industry_newsletter',\r\n      status: 'active',\r\n      credentials: {\r\n        email: 'helix@medtech-intelligence.com'\r\n      }\r\n    },\r\n    {\r\n      id: 'citeline_medtech',\r\n      name: 'Citeline Medtech Insight Newsletter',\r\n      url: 'https://insights.citeline.com/medtech-insight/',\r\n      description: 'Globale Medtech-Nachrichten und Einblicke, Trends und Marktinformationen',\r\n      requiresAuth: true,\r\n      category: 'market_analysis',\r\n      status: 'active',\r\n      credentials: {\r\n        email: 'helix@medtech-intelligence.com'\r\n      }\r\n    }\r\n  ];\r\n\r\n  // Add expanded premium sources based on your comprehensive newsletter analysis\r\n  private expandedSources: NewsletterSource[] = [\r\n    {\r\n      id: 'emergo_ul',\r\n      name: 'Emergo by UL Newsletter',\r\n      url: 'https://www.emergobyul.com/services/newsletters',\r\n      description: 'Regulatorische Updates und Markteinblicke für Medizinprodukte-Hersteller',\r\n      requiresAuth: true,\r\n      category: 'regulatory_newsletter',\r\n      status: 'configured',\r\n      credentials: { email: 'helix@medtech-intelligence.com' }\r\n    },\r\n    {\r\n      id: 'kpmg_medtech',\r\n      name: 'KPMG MedTech Newsletter',\r\n      url: 'https://home.kpmg/xx/en/home/industries/healthcare/medtech.html',\r\n      description: 'Strategische Einblicke und Marktanalysen von KPMG für MedTech-Unternehmen',\r\n      requiresAuth: true,\r\n      category: 'market_analysis',\r\n      status: 'configured',\r\n      credentials: { email: 'helix@medtech-intelligence.com' }\r\n    },\r\n    {\r\n      id: 'mckinsey_health',\r\n      name: 'McKinsey Health Tech Newsletter',\r\n      url: 'https://www.mckinsey.com/industries/healthcare-systems-and-services',\r\n      description: 'Strategische Gesundheitstechnologie-Insights von McKinsey & Company',\r\n      requiresAuth: true,\r\n      category: 'market_analysis',\r\n      status: 'configured',\r\n      credentials: { email: 'helix@medtech-intelligence.com' }\r\n    },\r\n    {\r\n      id: 'pwc_health',\r\n      name: 'PwC Health Services Newsletter',\r\n      url: 'https://www.pwc.com/gx/en/industries/healthcare.html',\r\n      description: 'Gesundheitswesen und MedTech-Trends von PricewaterhouseCoopers',\r\n      requiresAuth: true,\r\n      category: 'market_analysis',\r\n      status: 'configured',\r\n      credentials: { email: 'helix@medtech-intelligence.com' }\r\n    },\r\n    {\r\n      id: 'fiercebiotech',\r\n      name: 'FierceBiotech Newsletter',\r\n      url: 'https://www.fiercebiotech.com/',\r\n      description: 'Tägliche Biotechnologie- und MedTech-Nachrichten für Führungskräfte',\r\n      requiresAuth: true,\r\n      category: 'industry_newsletter',\r\n      status: 'configured',\r\n      credentials: { email: 'helix@medtech-intelligence.com' }\r\n    },\r\n    {\r\n      id: 'massdevice',\r\n      name: 'MassDevice Newsletter',\r\n      url: 'https://www.massdevice.com/',\r\n      description: 'Medizinprodukte-Industrie News, Analysis und Intelligence',\r\n      requiresAuth: true,\r\n      category: 'industry_newsletter',\r\n      status: 'configured',\r\n      credentials: { email: 'helix@medtech-intelligence.com' }\r\n    },\r\n    {\r\n      id: 'regulatory_focus',\r\n      name: 'Regulatory Focus Newsletter',\r\n      url: 'https://www.raps.org/news-and-articles/news-articles',\r\n      description: 'Regulatorische Nachrichten und Analysen für Life Sciences',\r\n      requiresAuth: true,\r\n      category: 'regulatory_newsletter',\r\n      status: 'configured',\r\n      credentials: { email: 'helix@medtech-intelligence.com' }\r\n    },\r\n    {\r\n      id: 'devicetalks',\r\n      name: 'DeviceTalks Newsletter',\r\n      url: 'https://www.devicetalks.com/',\r\n      description: 'Medizinprodukte-Engineering und Business Intelligence',\r\n      requiresAuth: false,\r\n      category: 'industry_newsletter',\r\n      status: 'configured'\r\n    },\r\n    {\r\n      id: 'mdt_magazine',\r\n      name: 'Medical Design & Technology Magazine',\r\n      url: 'https://www.mdtmag.com/',\r\n      description: 'Design, Entwicklung und Herstellung von Medizinprodukten',\r\n      requiresAuth: false,\r\n      category: 'industry_newsletter',\r\n      status: 'configured'\r\n    },\r\n    {\r\n      id: 'meddeviceonline',\r\n      name: 'Medical Device Online Newsletter',\r\n      url: 'https://www.meddeviceonline.com/',\r\n      description: 'Umfassende Medizinprodukte-Ressourcen und Branchennachrichten',\r\n      requiresAuth: false,\r\n      category: 'industry_newsletter',\r\n      status: 'configured'\r\n    },\r\n    {\r\n      id: 'qmed',\r\n      name: 'Qmed Newsletter',\r\n      url: 'https://www.qmed.com/',\r\n      description: 'Qualität und Compliance in der Medizinprodukte-Branche',\r\n      requiresAuth: true,\r\n      category: 'regulatory_newsletter',\r\n      status: 'configured',\r\n      credentials: { email: 'helix@medtech-intelligence.com' }\r\n    },\r\n    {\r\n      id: 'medtechbreakthrough',\r\n      name: 'MedTech Breakthrough Newsletter',\r\n      url: 'https://medtechbreakthrough.com/',\r\n      description: 'Innovationen und Durchbrüche in der Medizintechnologie',\r\n      requiresAuth: false,\r\n      category: 'industry_newsletter',\r\n      status: 'configured'\r\n    },\r\n    {\r\n      id: 'dotmed',\r\n      name: 'DOTmed Newsletter',\r\n      url: 'https://www.dotmed.com/',\r\n      description: 'Medizinische Ausrüstung, Service und Handelsnachrichten',\r\n      requiresAuth: false,\r\n      category: 'industry_newsletter',\r\n      status: 'configured'\r\n    },\r\n    {\r\n      id: 'healthcareitnews',\r\n      name: 'Healthcare IT News MedTech',\r\n      url: 'https://www.healthcareitnews.com/',\r\n      description: 'Digital Health und Health IT Innovations',\r\n      requiresAuth: false,\r\n      category: 'industry_newsletter',\r\n      status: 'configured'\r\n    },\r\n    {\r\n      id: 'mobihealthnews',\r\n      name: 'MobiHealthNews Newsletter',\r\n      url: 'https://www.mobihealthnews.com/',\r\n      description: 'Mobile Health und Digital Health Technologien',\r\n      requiresAuth: false,\r\n      category: 'industry_newsletter',\r\n      status: 'configured'\r\n    },\r\n    {\r\n      id: 'mpo_magazine',\r\n      name: 'Medical Product Outsourcing Magazine',\r\n      url: 'https://www.mpo-mag.com/',\r\n      description: 'Outsourcing und Lieferketten-Management in der MedTech-Branche',\r\n      requiresAuth: false,\r\n      category: 'industry_newsletter',\r\n      status: 'configured'\r\n    }\r\n  ];\r\n\r\n  getAllSources(): NewsletterSource[] {\r\n    return [...this.sources, ...this.expandedSources];\r\n  }\r\n\r\n  async scrapeAllSources(): Promise<ScrapedArticle[]> {\r\n    const articles: ScrapedArticle[] = [];\r\n    const allSources = this.getAllSources();\r\n    const activeSources = allSources.filter(source => source.status === 'active');\r\n\r\n    for (const source of activeSources) {\r\n      try {\r\n        logger.info(`Scraping source: ${source.name} (Auth required: ${source.requiresAuth})`);\r\n        const sourceArticles = await this.scrapeSource(source);\r\n        articles.push(...sourceArticles);\r\n        \r\n        // Rate limiting - wait between sources\r\n        await new Promise(resolve => setTimeout(resolve, 2000));\r\n      } catch (error: any) {\r\n        logger.error(`Error scraping ${source.name}:`, error);\r\n      }\r\n    }\r\n\r\n    return articles;\r\n  }\r\n\r\n  async scrapePublicSources(): Promise<ScrapedArticle[]> {\r\n    const articles: ScrapedArticle[] = [];\r\n    const allSources = this.getAllSources();\r\n    const publicSources = allSources.filter(source => !source.requiresAuth && source.status === 'active');\r\n\r\n    for (const source of publicSources) {\r\n      try {\r\n        logger.info(`Scraping public source: ${source.name}`);\r\n        const sourceArticles = await this.scrapeSource(source);\r\n        articles.push(...sourceArticles);\r\n        \r\n        // Rate limiting\r\n        await new Promise(resolve => setTimeout(resolve, 1500));\r\n      } catch (error: any) {\r\n        logger.error(`Error scraping ${source.name}:`, error);\r\n      }\r\n    }\r\n\r\n    return articles;\r\n  }\r\n\r\n  private async scrapeSource(source: NewsletterSource): Promise<ScrapedArticle[]> {\r\n    switch (source.id) {\r\n      case 'medtech_dive':\r\n        return this.scrapeMedTechDive(source);\r\n      case 'medtech_europe':\r\n        return this.scrapeMedTechEurope(source);\r\n      case 'medical_device_network':\r\n        return this.scrapeMedicalDeviceNetwork(source);\r\n      case 'medtech_insights':\r\n        return this.scrapeMedTechInsights(source);\r\n      case 'citeline_medtech':\r\n        return this.scrapeCitelineMedtech(source);\r\n      case 'medtech_strategist':\r\n        return this.scrapeMedTechStrategist(source);\r\n      case 'bioworld':\r\n        return this.scrapeBioWorld(source);\r\n      default:\r\n        logger.warn(`No scraper implemented for source: ${source.id}`);\r\n        return this.generateFallbackArticles(source);\r\n    }\r\n  }\r\n\r\n  private async scrapeMedTechDive(source: NewsletterSource): Promise<ScrapedArticle[]> {\r\n    const articles: ScrapedArticle[] = [];\r\n    \r\n    try {\r\n      // Headers to appear as a regular browser\r\n      const headers = {\r\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36',\r\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',\r\n        'Accept-Language': 'en-US,en;q=0.5',\r\n        'Accept-Encoding': 'gzip, deflate',\r\n        'Connection': 'keep-alive',\r\n      };\r\n\r\n      const response = await axios.get(source.url, { \r\n        headers,\r\n        timeout: 30000,\r\n        maxRedirects: 5\r\n      });\r\n\r\n      const $ = cheerio.load(response.data);\r\n      \r\n      // MedTech Dive article selectors (these would need to be refined based on actual site structure)\r\n      const articleSelectors = [\r\n        '.feed__item',\r\n        '.story-item',\r\n        'article',\r\n        '.news-item'\r\n      ];\r\n\r\n      let foundArticles = false;\r\n\r\n      for (const selector of articleSelectors) {\r\n        const articleElements = $(selector);\r\n        \r\n        if (articleElements.length > 0) {\r\n          foundArticles = true;\r\n          logger.info(`Found ${articleElements.length} articles using selector: ${selector}`);\r\n\r\n          articleElements.each((index, element) => {\r\n            if (index >= 10) return false; // Limit to 10 articles per source\r\n\r\n            const $article = $(element);\r\n            \r\n            // Extract article data\r\n            const title = $article.find('h1, h2, h3, .title, .headline').first().text().trim();\r\n            const url = $article.find('a').first().attr('href');\r\n            const dateText = $article.find('.date, .published, time').first().text().trim();\r\n            const author = $article.find('.author, .byline').first().text().trim();\r\n            const summary = $article.find('.summary, .excerpt, p').first().text().trim();\r\n\r\n            if (title && title.length > 10) {\r\n              // Construct full URL if relative\r\n              let articleUrl = url || source.url;\r\n              if (url && !url.startsWith('http')) {\r\n                const baseUrl = new URL(source.url).origin;\r\n                articleUrl = baseUrl + (url.startsWith('/') ? url : '/' + url);\r\n              }\r\n\r\n              // Parse date or use current date\r\n              let publicationDate = new Date().toISOString();\r\n              if (dateText) {\r\n                const parsedDate = new Date(dateText);\r\n                if (!isNaN(parsedDate.getTime())) {\r\n                  publicationDate = parsedDate.toISOString();\r\n                }\r\n              }\r\n\r\n              articles.push({\r\n                source_name: source.name,\r\n                article_title: title,\r\n                article_url: articleUrl,\r\n                publication_date: publicationDate,\r\n                author: author || undefined,\r\n                content_text: summary || title,\r\n                keywords: this.extractKeywords(title + ' ' + summary, source.category),\r\n                is_gated: false,\r\n                scrape_timestamp: new Date().toISOString()\r\n              });\r\n            }\r\n          });\r\n          break; // Stop after finding articles with first working selector\r\n        }\r\n      }\r\n\r\n      if (!foundArticles) {\r\n        logger.warn(`No articles found for ${source.name} with any selector`);\r\n        // Generate fallback articles based on source category to ensure we have content\r\n        articles.push(...this.generateFallbackArticles(source));\r\n      }\r\n\r\n    } catch (error: any) {\r\n      logger.error(`Error scraping ${source.name}:`, error.message);\r\n      // Generate fallback articles on error\r\n      articles.push(...this.generateFallbackArticles(source));\r\n    }\r\n\r\n    return articles;\r\n  }\r\n\r\n  private async scrapeMedTechEurope(source: NewsletterSource): Promise<ScrapedArticle[]> {\r\n    const articles: ScrapedArticle[] = [];\r\n    \r\n    try {\r\n      const headers = {\r\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',\r\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8',\r\n        'Accept-Language': 'en-US,en;q=0.5',\r\n        'Accept-Encoding': 'gzip, deflate, br',\r\n        'DNT': '1',\r\n        'Connection': 'keep-alive',\r\n        'Upgrade-Insecure-Requests': '1',\r\n      };\r\n\r\n      const response = await axios.get(source.url, { \r\n        headers,\r\n        timeout: 30000,\r\n        maxRedirects: 5\r\n      });\r\n\r\n      const $ = cheerio.load(response.data);\r\n      \r\n      // MedTech Europe newsletter selectors\r\n      const articleSelectors = [\r\n        '.newsletter-item',\r\n        '.news-item',\r\n        '.content-item',\r\n        'article.post',\r\n        '.entry-content'\r\n      ];\r\n\r\n      let foundArticles = false;\r\n\r\n      for (const selector of articleSelectors) {\r\n        const articleElements = $(selector);\r\n        \r\n        if (articleElements.length > 0) {\r\n          foundArticles = true;\r\n          logger.info(`Found ${articleElements.length} articles from MedTech Europe using selector: ${selector}`);\r\n\r\n          articleElements.each((index, element) => {\r\n            if (index >= 8) return false;\r\n\r\n            const $article = $(element);\r\n            \r\n            const title = $article.find('h1, h2, h3, .title, .headline').first().text().trim();\r\n            const url = $article.find('a').first().attr('href');\r\n            const dateText = $article.find('.date, .published, time').first().text().trim();\r\n            const summary = $article.find('.summary, .excerpt, p').first().text().trim();\r\n\r\n            if (title && title.length > 10) {\r\n              let articleUrl = url || source.url;\r\n              if (url && !url.startsWith('http')) {\r\n                const baseUrl = new URL(source.url).origin;\r\n                articleUrl = baseUrl + (url.startsWith('/') ? url : '/' + url);\r\n              }\r\n\r\n              let publicationDate = new Date().toISOString();\r\n              if (dateText) {\r\n                const parsedDate = new Date(dateText);\r\n                if (!isNaN(parsedDate.getTime())) {\r\n                  publicationDate = parsedDate.toISOString();\r\n                }\r\n              }\r\n\r\n              articles.push({\r\n                source_name: source.name,\r\n                article_title: title,\r\n                article_url: articleUrl,\r\n                publication_date: publicationDate,\r\n                content_text: summary || title,\r\n                keywords: this.extractKeywords(title + ' ' + summary, source.category),\r\n                is_gated: source.requiresAuth,\r\n                scrape_timestamp: new Date().toISOString()\r\n              });\r\n            }\r\n          });\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!foundArticles) {\r\n        logger.info(`No articles found for MedTech Europe, generating fallback content`);\r\n        articles.push(...this.generateFallbackArticles(source));\r\n      }\r\n\r\n    } catch (error: any) {\r\n      logger.error(`Error scraping MedTech Europe:`, error.message);\r\n      articles.push(...this.generateFallbackArticles(source));\r\n    }\r\n\r\n    return articles;\r\n  }\r\n\r\n  private async scrapeMedicalDeviceNetwork(source: NewsletterSource): Promise<ScrapedArticle[]> {\r\n    const articles: ScrapedArticle[] = [];\r\n    \r\n    try {\r\n      const headers = {\r\n        'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',\r\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',\r\n        'Accept-Language': 'en-GB,en;q=0.5',\r\n        'Cache-Control': 'no-cache',\r\n        'Pragma': 'no-cache'\r\n      };\r\n\r\n      const response = await axios.get(source.url, { \r\n        headers,\r\n        timeout: 25000,\r\n        maxRedirects: 3\r\n      });\r\n\r\n      const $ = cheerio.load(response.data);\r\n      \r\n      // Medical Device Network selectors\r\n      const articleSelectors = [\r\n        '.newsletter-archive-item',\r\n        '.archive-item',\r\n        '.news-list-item',\r\n        '.content-block',\r\n        'article'\r\n      ];\r\n\r\n      let foundArticles = false;\r\n\r\n      for (const selector of articleSelectors) {\r\n        const articleElements = $(selector);\r\n        \r\n        if (articleElements.length > 0) {\r\n          foundArticles = true;\r\n          logger.info(`Found ${articleElements.length} articles from Medical Device Network`);\r\n\r\n          articleElements.each((index, element) => {\r\n            if (index >= 6) return false;\r\n\r\n            const $article = $(element);\r\n            \r\n            const title = $article.find('h1, h2, h3, .title').first().text().trim();\r\n            const url = $article.find('a').first().attr('href');\r\n            const dateText = $article.find('.date, time, .published').first().text().trim();\r\n            const summary = $article.find('p, .excerpt, .description').first().text().trim();\r\n\r\n            if (title && title.length > 15) {\r\n              let articleUrl = url || source.url;\r\n              if (url && !url.startsWith('http')) {\r\n                const baseUrl = new URL(source.url).origin;\r\n                articleUrl = baseUrl + (url.startsWith('/') ? url : '/' + url);\r\n              }\r\n\r\n              articles.push({\r\n                source_name: source.name,\r\n                article_title: title,\r\n                article_url: articleUrl,\r\n                publication_date: this.parseDate(dateText),\r\n                content_text: summary || title,\r\n                keywords: this.extractKeywords(title + ' ' + summary, source.category),\r\n                is_gated: source.requiresAuth,\r\n                scrape_timestamp: new Date().toISOString()\r\n              });\r\n            }\r\n          });\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!foundArticles) {\r\n        articles.push(...this.generateFallbackArticles(source));\r\n      }\r\n\r\n    } catch (error: any) {\r\n      logger.error(`Error scraping Medical Device Network:`, error.message);\r\n      articles.push(...this.generateFallbackArticles(source));\r\n    }\r\n\r\n    return articles;\r\n  }\r\n\r\n  private async scrapeMedTechInsights(source: NewsletterSource): Promise<ScrapedArticle[]> {\r\n    const articles: ScrapedArticle[] = [];\r\n    \r\n    try {\r\n      const headers = {\r\n        'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',\r\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8'\r\n      };\r\n\r\n      const response = await axios.get(source.url, { \r\n        headers,\r\n        timeout: 20000,\r\n        maxRedirects: 5\r\n      });\r\n\r\n      const $ = cheerio.load(response.data);\r\n      \r\n      const articleSelectors = [\r\n        '.post',\r\n        '.blog-post',\r\n        '.insight-item',\r\n        '.article-item',\r\n        'article'\r\n      ];\r\n\r\n      let foundArticles = false;\r\n\r\n      for (const selector of articleSelectors) {\r\n        const articleElements = $(selector);\r\n        \r\n        if (articleElements.length > 0) {\r\n          foundArticles = true;\r\n          logger.info(`Found ${articleElements.length} articles from Med-Tech Insights`);\r\n\r\n          articleElements.each((index, element) => {\r\n            if (index >= 7) return false;\r\n\r\n            const $article = $(element);\r\n            \r\n            const title = $article.find('h1, h2, h3, .post-title, .title').first().text().trim();\r\n            const url = $article.find('a').first().attr('href');\r\n            const dateText = $article.find('.date, .post-date, time').first().text().trim();\r\n            const author = $article.find('.author, .by-author').first().text().trim();\r\n            const summary = $article.find('.excerpt, .summary, p').first().text().trim();\r\n\r\n            if (title && title.length > 10) {\r\n              let articleUrl = url || source.url;\r\n              if (url && !url.startsWith('http')) {\r\n                const baseUrl = new URL(source.url).origin;\r\n                articleUrl = baseUrl + (url.startsWith('/') ? url : '/' + url);\r\n              }\r\n\r\n              articles.push({\r\n                source_name: source.name,\r\n                article_title: title,\r\n                article_url: articleUrl,\r\n                publication_date: this.parseDate(dateText),\r\n                author: author || undefined,\r\n                content_text: summary || title,\r\n                keywords: this.extractKeywords(title + ' ' + summary, source.category),\r\n                is_gated: source.requiresAuth,\r\n                scrape_timestamp: new Date().toISOString()\r\n              });\r\n            }\r\n          });\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!foundArticles) {\r\n        articles.push(...this.generateFallbackArticles(source));\r\n      }\r\n\r\n    } catch (error: any) {\r\n      logger.error(`Error scraping Med-Tech Insights:`, error.message);\r\n      articles.push(...this.generateFallbackArticles(source));\r\n    }\r\n\r\n    return articles;\r\n  }\r\n\r\n  private async scrapeCitelineMedtech(source: NewsletterSource): Promise<ScrapedArticle[]> {\r\n    const articles: ScrapedArticle[] = [];\r\n    \r\n    try {\r\n      const headers = {\r\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/120.0',\r\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8',\r\n        'Accept-Language': 'en-US,en;q=0.5',\r\n        'Accept-Encoding': 'gzip, deflate, br'\r\n      };\r\n\r\n      const response = await axios.get(source.url, { \r\n        headers,\r\n        timeout: 30000\r\n      });\r\n\r\n      const $ = cheerio.load(response.data);\r\n      \r\n      const articleSelectors = [\r\n        '.insight-article',\r\n        '.medtech-article',\r\n        '.news-article',\r\n        '.content-item',\r\n        'article'\r\n      ];\r\n\r\n      let foundArticles = false;\r\n\r\n      for (const selector of articleSelectors) {\r\n        const articleElements = $(selector);\r\n        \r\n        if (articleElements.length > 0) {\r\n          foundArticles = true;\r\n          logger.info(`Found ${articleElements.length} articles from Citeline Medtech`);\r\n\r\n          articleElements.each((index, element) => {\r\n            if (index >= 5) return false;\r\n\r\n            const $article = $(element);\r\n            \r\n            const title = $article.find('h1, h2, h3, .article-title').first().text().trim();\r\n            const url = $article.find('a').first().attr('href');\r\n            const dateText = $article.find('.published-date, .date, time').first().text().trim();\r\n            const summary = $article.find('.article-summary, .excerpt, p').first().text().trim();\r\n\r\n            if (title && title.length > 12) {\r\n              let articleUrl = url || source.url;\r\n              if (url && !url.startsWith('http')) {\r\n                const baseUrl = new URL(source.url).origin;\r\n                articleUrl = baseUrl + (url.startsWith('/') ? url : '/' + url);\r\n              }\r\n\r\n              articles.push({\r\n                source_name: source.name,\r\n                article_title: title,\r\n                article_url: articleUrl,\r\n                publication_date: this.parseDate(dateText),\r\n                content_text: summary || title,\r\n                keywords: this.extractKeywords(title + ' ' + summary, source.category),\r\n                is_gated: source.requiresAuth,\r\n                scrape_timestamp: new Date().toISOString()\r\n              });\r\n            }\r\n          });\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!foundArticles) {\r\n        articles.push(...this.generateFallbackArticles(source));\r\n      }\r\n\r\n    } catch (error: any) {\r\n      logger.error(`Error scraping Citeline Medtech:`, error.message);\r\n      articles.push(...this.generateFallbackArticles(source));\r\n    }\r\n\r\n    return articles;\r\n  }\r\n\r\n  private async scrapeMedTechStrategist(source: NewsletterSource): Promise<ScrapedArticle[]> {\r\n    const articles: ScrapedArticle[] = [];\r\n    \r\n    try {\r\n      const headers = {\r\n        'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.1 Safari/605.1.15',\r\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'\r\n      };\r\n\r\n      const response = await axios.get(source.url, { \r\n        headers,\r\n        timeout: 25000\r\n      });\r\n\r\n      const $ = cheerio.load(response.data);\r\n      \r\n      const articleSelectors = [\r\n        '.newsletter-item',\r\n        '.strategy-article',\r\n        '.medtech-news',\r\n        '.content-block',\r\n        'article'\r\n      ];\r\n\r\n      let foundArticles = false;\r\n\r\n      for (const selector of articleSelectors) {\r\n        const articleElements = $(selector);\r\n        \r\n        if (articleElements.length > 0) {\r\n          foundArticles = true;\r\n          logger.info(`Found ${articleElements.length} articles from MedTech Strategist`);\r\n\r\n          articleElements.each((index, element) => {\r\n            if (index >= 4) return false;\r\n\r\n            const $article = $(element);\r\n            \r\n            const title = $article.find('h1, h2, h3, .title').first().text().trim();\r\n            const url = $article.find('a').first().attr('href');\r\n            const dateText = $article.find('.date, time').first().text().trim();\r\n            const summary = $article.find('.summary, p').first().text().trim();\r\n\r\n            if (title && title.length > 15) {\r\n              let articleUrl = url || source.url;\r\n              if (url && !url.startsWith('http')) {\r\n                const baseUrl = new URL(source.url).origin;\r\n                articleUrl = baseUrl + (url.startsWith('/') ? url : '/' + url);\r\n              }\r\n\r\n              articles.push({\r\n                source_name: source.name,\r\n                article_title: title,\r\n                article_url: articleUrl,\r\n                publication_date: this.parseDate(dateText),\r\n                content_text: summary || title,\r\n                keywords: this.extractKeywords(title + ' ' + summary, source.category),\r\n                is_gated: source.requiresAuth,\r\n                scrape_timestamp: new Date().toISOString()\r\n              });\r\n            }\r\n          });\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!foundArticles) {\r\n        articles.push(...this.generateFallbackArticles(source));\r\n      }\r\n\r\n    } catch (error: any) {\r\n      logger.error(`Error scraping MedTech Strategist:`, error.message);\r\n      articles.push(...this.generateFallbackArticles(source));\r\n    }\r\n\r\n    return articles;\r\n  }\r\n\r\n  private async scrapeBioWorld(source: NewsletterSource): Promise<ScrapedArticle[]> {\r\n    const articles: ScrapedArticle[] = [];\r\n    \r\n    try {\r\n      const headers = {\r\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36 Edg/120.0.0.0',\r\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8'\r\n      };\r\n\r\n      const response = await axios.get(source.url, { \r\n        headers,\r\n        timeout: 30000\r\n      });\r\n\r\n      const $ = cheerio.load(response.data);\r\n      \r\n      const articleSelectors = [\r\n        '.bioworld-article',\r\n        '.medtech-news',\r\n        '.news-item',\r\n        '.article-preview',\r\n        'article'\r\n      ];\r\n\r\n      let foundArticles = false;\r\n\r\n      for (const selector of articleSelectors) {\r\n        const articleElements = $(selector);\r\n        \r\n        if (articleElements.length > 0) {\r\n          foundArticles = true;\r\n          logger.info(`Found ${articleElements.length} articles from BioWorld`);\r\n\r\n          articleElements.each((index, element) => {\r\n            if (index >= 6) return false;\r\n\r\n            const $article = $(element);\r\n            \r\n            const title = $article.find('h1, h2, h3, .headline').first().text().trim();\r\n            const url = $article.find('a').first().attr('href');\r\n            const dateText = $article.find('.publish-date, .date, time').first().text().trim();\r\n            const author = $article.find('.author, .byline').first().text().trim();\r\n            const summary = $article.find('.summary, .excerpt, p').first().text().trim();\r\n\r\n            if (title && title.length > 10) {\r\n              let articleUrl = url || source.url;\r\n              if (url && !url.startsWith('http')) {\r\n                const baseUrl = new URL(source.url).origin;\r\n                articleUrl = baseUrl + (url.startsWith('/') ? url : '/' + url);\r\n              }\r\n\r\n              articles.push({\r\n                source_name: source.name,\r\n                article_title: title,\r\n                article_url: articleUrl,\r\n                publication_date: this.parseDate(dateText),\r\n                author: author || undefined,\r\n                content_text: summary || title,\r\n                keywords: this.extractKeywords(title + ' ' + summary, source.category),\r\n                is_gated: source.requiresAuth,\r\n                scrape_timestamp: new Date().toISOString()\r\n              });\r\n            }\r\n          });\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!foundArticles) {\r\n        articles.push(...this.generateFallbackArticles(source));\r\n      }\r\n\r\n    } catch (error: any) {\r\n      logger.error(`Error scraping BioWorld:`, error.message);\r\n      articles.push(...this.generateFallbackArticles(source));\r\n    }\r\n\r\n    return articles;\r\n  }\r\n\r\n  private parseDate(dateText: string): string {\r\n    if (!dateText) {\r\n      return new Date().toISOString();\r\n    }\r\n\r\n    const cleanedDate = dateText.replace(/Published:|Posted:|Date:/gi, '').trim();\r\n    const parsedDate = new Date(cleanedDate);\r\n    \r\n    if (!isNaN(parsedDate.getTime())) {\r\n      return parsedDate.toISOString();\r\n    }\r\n\r\n    // Try common date patterns\r\n    const patterns = [\r\n      /(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})/,  // MM/DD/YYYY\r\n      /(\\d{1,2})-(\\d{1,2})-(\\d{4})/,   // MM-DD-YYYY\r\n      /(\\d{4})-(\\d{1,2})-(\\d{1,2})/,   // YYYY-MM-DD\r\n    ];\r\n\r\n    for (const pattern of patterns) {\r\n      const match = cleanedDate.match(pattern);\r\n      if (match) {\r\n        const testDate = new Date(match[0]);\r\n        if (!isNaN(testDate.getTime())) {\r\n          return testDate.toISOString();\r\n        }\r\n      }\r\n    }\r\n\r\n    // Default to current date if parsing fails\r\n    return new Date().toISOString();\r\n  }\r\n\r\n  private generateFallbackArticles(source: NewsletterSource): ScrapedArticle[] {\r\n    const categoryArticles = {\r\n      industry_newsletter: [\r\n        'KI-Revolution in der Medizintechnik: Neue FDA-Genehmigungen für ML-Algorithmen',\r\n        'Digital Health Funding erreicht Rekordhoch von $8.2 Milliarden im Q3 2024',\r\n        'Wearable Medical Devices: Marktprognose zeigt 15% CAGR bis 2028',\r\n        'Robotik-Chirurgie: Da Vinci Xi System erhält erweiterte EU-Zulassung',\r\n        'Implantierbare Sensoren revolutionieren Diabetes-Management'\r\n      ],\r\n      regulatory_newsletter: [\r\n        'FDA veröffentlicht neue Guidance für Software als Medizinprodukt (SaMD)',\r\n        'EU MDR: Neue Anforderungen für klinische Studien ab Januar 2025',\r\n        'Swissmedic harmonisiert Zulassungsverfahren mit EU-Standards',\r\n        'MHRA Brexit-Update: Neue Anforderungen für Medizinprodukte-Import',\r\n        'ISO 13485:2024 - Wichtige Änderungen im Qualitätsmanagement'\r\n      ],\r\n      market_analysis: [\r\n        'Global MedTech Market: $595 Milliarden Volumen bis 2025 prognostiziert',\r\n        'Venture Capital Investment in Digital Health steigt um 23%',\r\n        'M&A-Aktivitäten im MedTech-Sektor erreichen 5-Jahres-Hoch',\r\n        'Supply Chain Resilience: Neue Strategien nach COVID-19',\r\n        'Emerging Markets: Asien-Pazifik führt MedTech-Wachstum an'\r\n      ]\r\n    };\r\n\r\n    const titles = categoryArticles[source.category] || categoryArticles.industry_newsletter;\r\n    const articlesToGenerate = 0; // MOCK DATA ENTFERNT - Keine automatische Artikel-Generierung\r\n\r\n    return titles.slice(0, articlesToGenerate).map(title => ({\r\n      source_name: source.name,\r\n      article_title: title,\r\n      article_url: source.url,\r\n      publication_date: new Date().toISOString(), // MOCK DATA ENTFERNT - Feste Zeit statt random\r\n      content_text: this.generateArticleContent(title, source),\r\n      keywords: this.extractKeywords(title, source.category),\r\n      is_gated: source.requiresAuth,\r\n      scrape_timestamp: new Date().toISOString()\r\n    }));\r\n  }\r\n\r\n  private generateArticleContent(title: string, source: NewsletterSource): string {\r\n    const premiumContent = source.requiresAuth ? \r\n      \"Premium-Inhalt basierend auf Branchenexpertise und verifizierten Quellen. \" : \r\n      \"Öffentlich verfügbare Informationen aus vertrauenswürdigen Industriequellen. \";\r\n      \r\n    return `${premiumContent}${title}\r\n\r\nDieser Artikel stammt aus ${source.name} und behandelt wichtige Entwicklungen im MedTech-Bereich. \r\n\r\nDie Inhalte basieren auf authentischen Newsletter-Quellen und bieten Einblicke in:\r\n- Aktuelle Markttrends und Entwicklungen\r\n- Regulatorische Änderungen und Compliance-Anforderungen  \r\n- Technologische Innovationen und deren Auswirkungen\r\n- Strategische Geschäftsentscheidungen der Branche\r\n\r\nQuelle: ${source.name} (${source.category})\r\nAuthentifizierung erforderlich: ${source.requiresAuth ? 'Ja' : 'Nein'}\r\nURL: ${source.url}\r\n\r\nFür vollständige Details und weitere Analysen besuchen Sie die ursprüngliche Quelle.`;\r\n  }\r\n\r\n  private extractKeywords(text: string, category: string): string[] {\r\n    const keywordMap = {\r\n      industry_newsletter: ['MedTech', 'Innovation', 'Branche', 'Technologie', 'Digital Health'],\r\n      regulatory_newsletter: ['Regulatorik', 'Compliance', 'FDA', 'EU MDR', 'Zulassung'],\r\n      market_analysis: ['Marktanalyse', 'Investment', 'Trends', 'Prognosen', 'M&A']\r\n    };\r\n    \r\n    const baseKeywords = keywordMap[category as keyof typeof keywordMap] || ['MedTech'];\r\n    \r\n    // Extract additional keywords from title\r\n    const additionalKeywords = text.toLowerCase()\r\n      .split(/\\s+/)\r\n      .filter(word => word.length > 4)\r\n      .filter(word => ['medtech', 'medical', 'device', 'health', 'digital', 'innovation'].includes(word))\r\n      .slice(0, 3);\r\n    \r\n    return [...baseKeywords, ...additionalKeywords].slice(0, 5);\r\n  }\r\n\r\n  getSources(): NewsletterSource[] {\r\n    return this.getAllSources();\r\n  }\r\n\r\n  getStats() {\r\n    const allSources = this.getAllSources();\r\n    const activeSources = allSources.filter(s => s.status === 'active').length;\r\n    const configuredSources = allSources.filter(s => s.status === 'configured').length;\r\n    const authRequired = allSources.filter(s => s.requiresAuth).length;\r\n    \r\n    const categories = allSources.reduce((acc, source) => {\r\n      acc[source.category] = (acc[source.category] || 0) + 1;\r\n      return acc;\r\n    }, {} as Record<string, number>);\r\n\r\n    return {\r\n      totalSources: allSources.length,\r\n      activeSources,\r\n      configuredSources,\r\n      authRequired,\r\n      categories\r\n    };\r\n  }\r\n}\r\n\r\nexport const realNewsletterScraper = new RealNewsletterScraper();"]}