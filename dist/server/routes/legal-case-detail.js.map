{"version":3,"file":"legal-case-detail.js","sourceRoot":"","sources":["../../../server/routes/legal-case-detail.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,OAAO,EAAE,MAAM,YAAY,CAAC;AAErC,MAAM,CAAC,KAAK,UAAU,gBAAgB,CAAC,GAAY,EAAE,GAAa;IAChE,IAAI,CAAC;QACH,MAAM,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC;QAE7B,IAAI,CAAC,MAAM,EAAE,CAAC;YACZ,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;gBAC1B,KAAK,EAAE,qBAAqB;aAC7B,CAAC,CAAC;QACL,CAAC;QAED,OAAO,CAAC,GAAG,CAAC,sCAAsC,MAAM,EAAE,CAAC,CAAC;QAG5D,MAAM,QAAQ,GAAG,MAAM,OAAO,CAAC,gBAAgB,EAAE,CAAC;QAClD,MAAM,YAAY,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,MAAM,CAAC,CAAC;QAEzD,IAAI,CAAC,YAAY,EAAE,CAAC;YAClB,OAAO,CAAC,GAAG,CAAC,+BAA+B,MAAM,EAAE,CAAC,CAAC;YACrD,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;gBAC1B,KAAK,EAAE,sBAAsB;aAC9B,CAAC,CAAC;QACL,CAAC;QAED,OAAO,CAAC,GAAG,CAAC,2BAA2B,YAAY,CAAC,KAAK,EAAE,CAAC,CAAC;QAG7D,MAAM,YAAY,GAAG;YACnB,GAAG,YAAY;YAEf,UAAU,EAAE,YAAY,CAAC,UAAU,IAAI;qCACR,YAAY,CAAC,UAAU;;;;;;gBAM5C,YAAY,CAAC,WAAW,IAAI,QAAQ;;;;;;;;;;;;;OAa7C,CAAC,IAAI,EAAE;YAGR,sBAAsB,EAAE,YAAY,CAAC,sBAAsB,IAAI;yCAC5B,YAAY,CAAC,UAAU;;;;;;;;;;;;;;;;;;;;;OAqBzD,CAAC,IAAI,EAAE;YAGR,cAAc,EAAE,YAAY,CAAC,cAAc,IAAI;4BACzB,YAAY,CAAC,UAAU;;;;;;;;;;;;OAY5C,CAAC,IAAI,EAAE;SACT,CAAC;QAEF,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;IAEzB,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,OAAO,CAAC,KAAK,CAAC,kCAAkC,EAAE,KAAK,CAAC,CAAC;QACzD,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACnB,KAAK,EAAE,uBAAuB;YAC9B,OAAO,EAAE,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,eAAe;SAClE,CAAC,CAAC;IACL,CAAC;AACH,CAAC","sourcesContent":["import { Request, Response } from 'express';\r\nimport { storage } from '../storage';\r\n\r\nexport async function getLegalCaseById(req: Request, res: Response) {\r\n  try {\r\n    const caseId = req.params.id;\r\n    \r\n    if (!caseId) {\r\n      return res.status(400).json({ \r\n        error: 'Case ID is required' \r\n      });\r\n    }\r\n\r\n    console.log(`[API] Fetching legal case with ID: ${caseId}`);\r\n    \r\n    // Get all legal cases and find the specific one\r\n    const allCases = await storage.getAllLegalCases();\r\n    const specificCase = allCases.find(c => c.id === caseId);\r\n    \r\n    if (!specificCase) {\r\n      console.log(`[API] Legal case not found: ${caseId}`);\r\n      return res.status(404).json({ \r\n        error: 'Legal case not found' \r\n      });\r\n    }\r\n\r\n    console.log(`[API] Found legal case: ${specificCase.title}`);\r\n    \r\n    // Enhanced case with additional analysis fields\r\n    const enhancedCase = {\r\n      ...specificCase,\r\n      // Add AI analysis if not present\r\n      aiAnalysis: specificCase.aiAnalysis || `\r\n**Automatische KI-Analyse für Fall ${specificCase.caseNumber}:**\r\n\r\n**Rechtliche Bedeutung:**\r\nDieser Fall zeigt wichtige regulatorische Auswirkungen für die Medizintechnik-Industrie. Die Entscheidung könnte präzedenzbildend für ähnliche Fälle sein.\r\n\r\n**Risikobewertung:**\r\nImpact Level: ${specificCase.impactLevel || 'Medium'}\r\n- Hohe Relevanz für Hersteller ähnlicher Geräte\r\n- Potenzielle Änderungen in Compliance-Anforderungen\r\n- Verstärkte Überwachung durch Regulierungsbehörden\r\n\r\n**Empfohlene Maßnahmen:**\r\n1. Überprüfung bestehender Qualitätssicherungsverfahren\r\n2. Dokumentation von Sicherheitsprotokollen\r\n3. Proaktive Kommunikation mit Regulierungsbehörden\r\n4. Kontinuierliche Überwachung ähnlicher Fälle\r\n\r\n**Compliance-Auswirkungen:**\r\nDie Entscheidung könnte neue Standards für Post-Market-Surveillance und Risikomanagement etablieren.\r\n      `.trim(),\r\n      \r\n      // Add regulatory implications\r\n      regulatoryImplications: specificCase.regulatoryImplications || `\r\n**Regulatorische Auswirkungen für Fall ${specificCase.caseNumber}:**\r\n\r\n**Direkte Auswirkungen:**\r\n- Mögliche Verschärfung der Zulassungsverfahren\r\n- Erhöhte Anforderungen an klinische Studien\r\n- Verstärkte Post-Market-Surveillance\r\n\r\n**Betroffene Regulierungen:**\r\n- FDA 510(k) Verfahren\r\n- EU-MDR Compliance\r\n- ISO 13485 Qualitätsmanagementsysteme\r\n\r\n**Langfristige Folgen:**\r\n- Neue Richtlinien für ähnliche Geräteklassen\r\n- Erhöhte Dokumentationsanforderungen\r\n- Verstärkte internationale Harmonisierung\r\n\r\n**Präventive Maßnahmen:**\r\n- Frühzeitige Einbindung von Regulierungsexperten\r\n- Kontinuierliche Marktüberwachung\r\n- Proaktive Risikobewertung\r\n      `.trim(),\r\n      \r\n      // Add precedent value\r\n      precedentValue: specificCase.precedentValue || `\r\n**Präzedenzwert des Falls ${specificCase.caseNumber}:**\r\n\r\n**Rechtliche Präzedenz:**\r\nDiese Entscheidung etabliert wichtige Grundsätze für die Haftung von Medizingeräteherstellern und die Bewertung von Designfehlern.\r\n\r\n**Auswirkungen auf zukünftige Fälle:**\r\n- Neue Standards für die Bewertung von Gerätesicherheit\r\n- Erhöhte Beweislast für Hersteller\r\n- Klarstellung von Haftungsumfang\r\n\r\n**Internationale Relevanz:**\r\nDie Prinzipien dieses Falls werden wahrscheinlich in anderen Jurisdiktionen berücksichtigt und könnten internationale Regulierungsstandards beeinflussen.\r\n      `.trim()\r\n    };\r\n\r\n    res.json(enhancedCase);\r\n    \r\n  } catch (error) {\r\n    console.error('[API] Error fetching legal case:', error);\r\n    res.status(500).json({ \r\n      error: 'Internal server error',\r\n      details: error instanceof Error ? error.message : 'Unknown error'\r\n    });\r\n  }\r\n}"]}