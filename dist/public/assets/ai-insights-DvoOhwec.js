import{j as e,J as o,a2 as F,u as H,ae as Q,r as g,g as V,h as B,d as w,S as q,B as h,_ as v,Q as C,C as r,a as n,b as i,a1 as U,c,W as O,k as Z,I as $,w as k,x as A,y as S,z as I,E as a,P as M,aj as J,M as W,ak as Y,al as G,a6 as X,am as ee}from"./index-Dm22qi9h.js";import{T as L}from"./target-D1Y3eE8V.js";import{D as se}from"./download-CQfvf7I6.js";import{F as le}from"./filter-CBkaAuG_.js";import{E as te}from"./eye-KEHLO33x.js";const ae=l=>l.includes("Critical")||l.includes("HighImpact")||l.includes("Urgent")||l.includes("Historic")||l.includes("CriticalRisk")?"bg-red-100 text-red-800 border-red-200 hover:bg-red-200":l.includes("Major")||l.includes("Reform")||l.includes("Comprehensive")||l.includes("Revolution")||l.includes("€150-200M")?"bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200":l.includes("Innovation")||l.includes("Tech")||l.includes("AI")||l.includes("Digital")||l.includes("SaMD")||l.includes("KI")?"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200":l.includes("%")||l.includes("Accuracy")||l.includes("Faster")||l.includes("Success")||l.includes("Prevented")||l.includes("Leader")?"bg-green-100 text-green-800 border-green-200 hover:bg-green-200":l.includes("Compliance")||l.includes("FDA")||l.includes("MDR")||l.includes("ISO")||l.includes("Approved")||l.includes("Regulation")?"bg-purple-100 text-purple-800 border-purple-200 hover:bg-purple-200":l.includes("Cost")||l.includes("Market")||l.includes("Business")||l.includes("€")||l.includes("AUD")||l.includes("Years")?"bg-yellow-100 text-yellow-800 border-yellow-200 hover:bg-yellow-200":l.includes("Health")||l.includes("Medical")||l.includes("Patient")||l.includes("Clinical")||l.includes("Pharma")?"bg-teal-100 text-teal-800 border-teal-200 hover:bg-teal-200":l.includes("Month")||l.includes("Hour")||l.includes("Time")||l.includes("Fast")||l.includes("Quick")?"bg-indigo-100 text-indigo-800 border-indigo-200 hover:bg-indigo-200":"bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200";function re({tag:l,className:m}){const j=ae(l);return e.jsx(o,{variant:"outline",className:F("text-xs font-medium transition-colors duration-200 cursor-default px-2 py-1 whitespace-nowrap",j,m),children:l})}const ne={trend_analysis:"Trend-Analyse",risk_assessment:"Risikobewertung",compliance_gap:"Compliance-Lücke",market_intelligence:"Marktintelligenz",prediction:"Vorhersage"},ie={critical:"bg-red-100 text-red-800 border-red-200",high:"bg-orange-100 text-orange-800 border-orange-200",medium:"bg-yellow-100 text-yellow-800 border-yellow-200",low:"bg-blue-100 text-blue-800 border-blue-200"},ce={high:"bg-red-100 text-red-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-green-100 text-green-800"},de={immediate:"Sofort",short_term:"Kurzfristig",medium_term:"Mittelfristig",long_term:"Langfristig"};function ge(){const{toast:l}=H();Q();const[m,j]=g.useState("all"),[p,T]=g.useState("all"),[x,z]=g.useState(""),[f,N]=g.useState(""),{data:K=[],isLoading:oe}=V({queryKey:["/api/ai-insights"],enabled:!0}),d=K.map(s=>{var t;return{id:s.id,title:s.title,description:((t=s.content)==null?void 0:t.substring(0,200))+"..."||"Zühlke MedTech Case Study",category:"trend_analysis",severity:"medium",confidence:85,impact:"high",timeframe:"medium_term",sources:Array.isArray(s.tags)?s.tags:[],recommendations:[],createdAt:s.created_at,relevantRegions:["EU","US","APAC"],affectedDeviceClasses:["Class II","Class III"],tags:Array.isArray(s.tags)?s.tags:[]}}),y=B({mutationFn:async s=>{try{const t=await fetch("/api/ai-analyses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:s})});if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);return await t.json()}catch(t){throw console.error("AI analysis error:",t),t}},onSuccess:()=>{C.invalidateQueries({queryKey:["/api/ai-analyses"]}),N(""),l({title:"Analyse gestartet",description:"Die KI-Analyse wurde erfolgreich gestartet und wird in Kürze abgeschlossen."})}}),b=d.filter(s=>{const t=x===""||s.title.toLowerCase().includes(x.toLowerCase())||s.description.toLowerCase().includes(x.toLowerCase())||s.tags.some(P=>P.toLowerCase().includes(x.toLowerCase())),u=m==="all"||s.category===m,R=p==="all"||s.severity===p;return t&&u&&R}),D=s=>new Date(s).toLocaleDateString("de-DE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),_=s=>s>=90?"text-green-600":s>=70?"text-yellow-600":"text-red-600",E=()=>{f.trim()&&y.mutate(f.trim())};return e.jsxs("div",{className:"container mx-auto py-4 px-4 sm:py-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6 mb-8",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-r from-emerald-500 via-teal-600 to-cyan-700 rounded-2xl shadow-lg",children:e.jsx(w,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight text-gray-900 dark:text-white mb-2",children:"KI Intelligence Center"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[e.jsxs("div",{className:"px-4 py-2 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-800 dark:text-emerald-200 rounded-xl text-sm font-semibold flex items-center gap-1",children:[e.jsx(w,{className:"w-4 h-4"}),"ML-Powered"]}),e.jsxs("div",{className:"px-4 py-2 bg-teal-100 dark:bg-teal-900/30 text-teal-800 dark:text-teal-200 rounded-xl text-sm font-semibold flex items-center gap-1",children:[e.jsx(L,{className:"w-4 h-4"}),"Zühlke Cases"]}),e.jsxs("div",{className:"px-4 py-2 bg-cyan-100 dark:bg-cyan-900/30 text-cyan-800 dark:text-cyan-200 rounded-xl text-sm font-semibold flex items-center gap-1",children:[e.jsx(q,{className:"w-4 h-4"}),"Compliance AI"]})]}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"KI-gestützte Analyse und Vorhersagen für regulatorische Trends mit Executive-Intelligence"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:space-x-2",children:[e.jsxs(h,{variant:"outline",size:"sm",className:"w-full sm:w-auto",onClick:()=>{l({title:"Aktualisierung",description:"KI-Insights werden aktualisiert..."}),C.invalidateQueries({queryKey:["/api/ai-insights"]})},children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:"sm:inline",children:"Aktualisieren"})]}),e.jsxs(h,{variant:"outline",size:"sm",className:"w-full sm:w-auto",onClick:()=>{l({title:"Export",description:"Report wird vorbereitet..."})},children:[e.jsx(se,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:"sm:inline",children:"Export"})]})]})]}),e.jsxs("div",{className:"grid gap-3 sm:gap-4 grid-cols-2 lg:grid-cols-4 mb-6 sm:mb-8",children:[e.jsxs(r,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-xs sm:text-sm font-medium line-clamp-2",children:"Aktive Analysen"}),e.jsx(U,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),e.jsxs(c,{className:"pt-2",children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:d.filter(s=>s.category==="trend_analysis").length}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:"Laufende Trend-Analysen"})]})]}),e.jsxs(r,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-xs sm:text-sm font-medium line-clamp-2",children:"Kritische Risiken"}),e.jsx(O,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),e.jsxs(c,{className:"pt-2",children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-red-600",children:d.filter(s=>s.severity==="critical").length}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:"Sofortige Aufmerksamkeit"})]})]}),e.jsxs(r,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-xs sm:text-sm font-medium line-clamp-2",children:"Markt-Intelligence"}),e.jsx(L,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),e.jsxs(c,{className:"pt-2",children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-green-600",children:d.filter(s=>s.category==="market_intelligence").length}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:"Marktchancen identifiziert"})]})]}),e.jsxs(r,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Durchschnittl. Konfidenz"}),e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[Math.round(d.reduce((s,t)=>s+t.confidence,0)/d.length),"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"KI-Vertrauen"})]})]})]}),e.jsxs(r,{className:"mb-6 sm:mb-8",children:[e.jsx(n,{className:"pb-4",children:e.jsxs(i,{className:"flex items-center text-base sm:text-lg",children:[e.jsx(le,{className:"mr-2 h-4 w-4 sm:h-5 sm:w-5"}),"Filter & Suche"]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsx("div",{className:"w-full",children:e.jsx($,{placeholder:"Nach Insights suchen...",value:x,onChange:s=>z(s.target.value),className:"w-full"})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs(k,{value:m,onValueChange:j,children:[e.jsx(A,{className:"w-full",children:e.jsx(S,{placeholder:"Kategorie"})}),e.jsxs(I,{children:[e.jsx(a,{value:"all",children:"Alle Kategorien"}),e.jsx(a,{value:"trend_analysis",children:"Trend-Analyse"}),e.jsx(a,{value:"risk_assessment",children:"Risikobewertung"}),e.jsx(a,{value:"compliance_gap",children:"Compliance-Lücke"}),e.jsx(a,{value:"market_intelligence",children:"Marktintelligenz"}),e.jsx(a,{value:"prediction",children:"Vorhersage"})]})]}),e.jsxs(k,{value:p,onValueChange:T,children:[e.jsx(A,{className:"w-full",children:e.jsx(S,{placeholder:"Priorität"})}),e.jsxs(I,{children:[e.jsx(a,{value:"all",children:"Alle"}),e.jsx(a,{value:"critical",children:"Kritisch"}),e.jsx(a,{value:"high",children:"Hoch"}),e.jsx(a,{value:"medium",children:"Mittel"}),e.jsx(a,{value:"low",children:"Niedrig"})]})]})]})]})]}),e.jsx("div",{className:"grid gap-4 sm:gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:b.map(s=>e.jsxs(r,{className:"h-full",children:[e.jsxs(n,{children:[e.jsxs(i,{className:"text-lg flex items-center justify-between",children:[e.jsx("span",{className:"flex-1",children:s.title}),e.jsx(o,{className:ie[s.severity],children:s.severity})]}),e.jsxs(M,{children:[e.jsx(o,{variant:"outline",className:"mr-2",children:ne[s.category]}),e.jsxs(o,{variant:"outline",className:ce[s.impact],children:["Impact: ",s.impact]})]})]}),e.jsxs(c,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Konfidenz:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{value:s.confidence,className:"w-16"}),e.jsxs("span",{className:`text-sm font-bold ${_(s.confidence)}`,children:[s.confidence,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Zeitrahmen:"}),e.jsx(o,{variant:"outline",children:de[s.timeframe]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Regionen:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s.relevantRegions.map(t=>e.jsx(o,{variant:"secondary",className:"text-xs",children:t},t))})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Tags:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s.tags.map((t,u)=>e.jsx(re,{tag:t},u))})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Empfehlungen:"}),e.jsxs("ul",{className:"list-disc list-inside text-xs text-muted-foreground mt-1 space-y-1",children:[s.recommendations.slice(0,2).map((t,u)=>e.jsx("li",{children:t},u)),s.recommendations.length>2&&e.jsxs("li",{className:"font-medium",children:["+",s.recommendations.length-2," weitere..."]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between pt-3 border-t gap-3",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:D(s.createdAt)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(h,{size:"sm",variant:"outline",className:"flex-1 sm:flex-none",children:[e.jsx(te,{className:"mr-1 h-3 w-3"}),e.jsx("span",{className:"sm:inline",children:"Details"})]}),e.jsxs(h,{size:"sm",variant:"outline",className:"flex-1 sm:flex-none",children:[e.jsx(W,{className:"mr-1 h-3 w-3"}),e.jsx("span",{className:"sm:inline",children:"Export"})]})]})]})]})]},s.id))}),b.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Y,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Keine Insights gefunden"}),e.jsx("p",{className:"text-muted-foreground",children:"Versuchen Sie, Ihre Suchkriterien zu ändern oder warten Sie auf neue Analysen."})]}),e.jsxs(r,{className:"mt-6 sm:mt-8",children:[e.jsxs(n,{className:"pb-4",children:[e.jsxs(i,{className:"flex items-center text-base sm:text-lg",children:[e.jsx(G,{className:"mr-2 h-4 w-4 sm:h-5 sm:w-5"}),"Neue KI-Analyse anfordern"]}),e.jsx(M,{className:"text-sm",children:"Stellen Sie eine spezifische Frage zur regulatorischen Landschaft"})]}),e.jsxs(c,{className:"space-y-4",children:[e.jsx(X,{placeholder:"z.B. 'Vergleiche FDA und EMA Anforderungen für AI/ML Medizinprodukte'",value:f,onChange:s=>N(s.target.value),className:"w-full resize-none",rows:3}),e.jsx(h,{onClick:E,disabled:y.isPending||!f.trim(),className:"w-full sm:w-auto",children:y.isPending?e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"mr-2 h-4 w-4 animate-spin"}),"Analyse läuft..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Analyse starten"]})})]})]})]})}export{ge as default};
