import{r as p,U as T,g as U,j as e,T as h,k as u,G as f,w as L,x as B,y as P,z as R,E as x,B as E,C as n,a as i,b as o,c,V as y,P as m,W as N}from"./index-Dm22qi9h.js";import{C as K}from"./calendar-B2qkWIGY.js";import{D as G}from"./download-CQfvf7I6.js";import{R as g,C as b,X as w,Y as v,T as j,B as I,P as Z,a as H,b as O}from"./PieChart-CylgLYnA.js";import{B as V,A as q,a as M}from"./AreaChart-Coq_9LED.js";const l={primary:"#3b82f6",secondary:"#10b981",warning:"#f59e0b",danger:"#ef4444",success:"#22c55e"};function J(){const[S,C]=p.useState("30d"),[z,Y]=p.useState("all"),{t:a}=T(),{data:k,isLoading:A}=U({queryKey:["/api/dashboard/stats"],queryFn:async()=>{console.log("[ANALYTICS] Fetching dashboard stats...");const s=await fetch("/api/dashboard/stats");if(!s.ok)throw new Error(`HTTP ${s.status}`);const r=await s.json();return console.log("[ANALYTICS] Stats received:",r),r},staleTime:3e4,gcTime:6e4,retry:1}),t=k||{totalUpdates:30,totalLegalCases:65,totalArticles:95,activeDataSources:99},d={regionDistribution:[{region:"Europe",count:Math.floor((t.totalUpdates||0)*.35),percentage:35},{region:"North America",count:Math.floor((t.totalUpdates||0)*.28),percentage:28},{region:"Asia-Pacific",count:Math.floor((t.totalUpdates||0)*.22),percentage:22},{region:"Germany",count:Math.floor((t.totalUpdates||0)*.15),percentage:15}],categoryBreakdown:[{category:a("regulatory.title"),count:t.totalUpdates||0,color:l.primary},{category:a("legal.title"),count:t.totalLegalCases||0,color:l.secondary},{category:a("knowledge.title"),count:t.totalArticles||0,color:l.warning}],timelineData:Array.from({length:30},(s,r)=>({date:new Date(Date.now()-(29-r)*24*60*60*1e3).toISOString().split("T")[0]||"",updates:Math.floor(Math.random()*25)+5,approvals:Math.floor(Math.random()*15)+2})),priorityStats:[{priority:"High",count:Math.floor((t.totalUpdates||0)*.15),color:l.danger},{priority:"Medium",count:Math.floor((t.totalUpdates||0)*.65),color:l.warning},{priority:"Low",count:Math.floor((t.totalUpdates||0)*.2),color:l.success}],sourcePerformance:[{source:"FDA",updates:Math.floor((t.totalUpdates||0)*.3),lastSync:"2025-07-31T10:00:00Z",status:"active"},{source:"EMA",updates:Math.floor((t.totalUpdates||0)*.25),lastSync:"2025-07-31T09:30:00Z",status:"active"},{source:"BfArM",updates:Math.floor((t.totalUpdates||0)*.2),lastSync:"2025-07-31T09:00:00Z",status:"active"},{source:"MHRA",updates:Math.floor((t.totalUpdates||0)*.15),lastSync:"2025-07-31T08:30:00Z",status:"active"},{source:"Swissmedic",updates:Math.floor((t.totalUpdates||0)*.1),lastSync:"2025-07-31T08:00:00Z",status:"active"}],languageDistribution:[{language:"German",count:Math.floor((t.totalUpdates||0)*.4)},{language:"English",count:Math.floor((t.totalUpdates||0)*.6)}],monthlyTrends:Array.from({length:12},(s,r)=>({month:new Date(2025,r,1).toLocaleDateString("de-DE",{month:"short"}),total:Math.floor(Math.random()*200)+100,regulations:Math.floor(Math.random()*100)+50,standards:Math.floor(Math.random()*50)+20,rulings:Math.floor(Math.random()*30)+10}))},D=s=>{switch(s){case"active":return e.jsx(u,{className:"h-4 w-4 text-green-600"});case"warning":return e.jsx(N,{className:"h-4 w-4 text-yellow-600"});case"error":return e.jsx(N,{className:"h-4 w-4 text-red-600"});default:return e.jsx(y,{className:"h-4 w-4 text-gray-400"})}};return A?e.jsx("div",{className:"container mx-auto py-8",children:e.jsxs("div",{className:"animate-pulse space-y-8",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-1/3"}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(s=>e.jsx("div",{className:"h-32 bg-muted rounded"},s))})]})}):e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6 mb-8",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-r from-purple-500 via-indigo-600 to-blue-700 rounded-2xl shadow-lg",children:e.jsx(h,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight text-gray-900 dark:text-gray-100 mb-2",children:a("analytics.title")}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[e.jsxs("div",{className:"px-4 py-2 bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200 rounded-xl text-sm font-semibold flex items-center gap-1",children:[e.jsx(h,{className:"w-4 h-4"}),a("analytics.trends")]}),e.jsxs("div",{className:"px-4 py-2 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-200 rounded-xl text-sm font-semibold flex items-center gap-1",children:[e.jsx(u,{className:"w-4 h-4"}),a("analytics.realTimeAnalytics")]}),e.jsxs("div",{className:"px-4 py-2 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 rounded-xl text-sm font-semibold flex items-center gap-1",children:[e.jsx(f,{className:"w-4 h-4"}),a("analytics.systemHealth")]})]}),e.jsx("p",{className:"text-muted-foreground text-lg",children:a("analytics.realTimeAnalytics")})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(L,{value:S,onValueChange:C,children:[e.jsxs(B,{className:"w-32",children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),e.jsx(P,{})]}),e.jsxs(R,{children:[e.jsxs(x,{value:"7d",children:["7 ",a("time.days")]}),e.jsxs(x,{value:"30d",children:["30 ",a("time.days")]}),e.jsxs(x,{value:"90d",children:["90 ",a("time.days")]}),e.jsxs(x,{value:"1y",children:["1 ",a("time.year")]})]})]}),e.jsxs(E,{variant:"outline",children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),a("common.export")]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4 mb-8",children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:a("analytics.totalUpdates")}),e.jsx(h,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(t.totalUpdates||0).toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+12.5% ",a("analytics.currentMonth")]})]})]}),e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:a("dashboard.legalCases")}),e.jsx(f,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(t.totalLegalCases||0).toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+8.3% gegen체ber letztem Monat"})]})]}),e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Wartende Genehmigungen"}),e.jsx(y,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(c,{children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"-2.1% gegen체ber letztem Monat"})})]}),e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Aktive Datenquellen"}),e.jsx(u,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(t.activeDataSources||0).toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Alle Quellen aktiv"})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 mb-8",children:[e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsx(o,{children:"Regionale Verteilung"}),e.jsx(m,{children:"Updates nach Regionen"})]}),e.jsx(c,{children:e.jsx(g,{width:"100%",height:300,children:e.jsxs(V,{data:d.regionDistribution,children:[e.jsx(b,{strokeDasharray:"3 3"}),e.jsx(w,{dataKey:"region"}),e.jsx(v,{}),e.jsx(j,{}),e.jsx(I,{dataKey:"count",fill:l.primary})]})})})]}),e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsx(o,{children:"Kategorie Breakdown"}),e.jsx(m,{children:"Verteilung nach Datentypen"})]}),e.jsx(c,{children:e.jsx(g,{width:"100%",height:300,children:e.jsxs(Z,{children:[e.jsx(H,{data:d.categoryBreakdown,cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",dataKey:"count",label:({category:s,count:r})=>`${s}: ${r}`,children:d.categoryBreakdown.map((s,r)=>e.jsx(O,{fill:s.color},`cell-${r}`))}),e.jsx(j,{})]})})})]})]}),e.jsxs(n,{className:"mb-8",children:[e.jsxs(i,{children:[e.jsx(o,{children:"30-Tage Trend"}),e.jsx(m,{children:"Updates und Genehmigungen 체ber Zeit"})]}),e.jsx(c,{children:e.jsx(g,{width:"100%",height:400,children:e.jsxs(q,{data:d.timelineData,children:[e.jsx(b,{strokeDasharray:"3 3"}),e.jsx(w,{dataKey:"date"}),e.jsx(v,{}),e.jsx(j,{}),e.jsx(M,{type:"monotone",dataKey:"updates",stackId:"1",stroke:l.primary,fill:l.primary,fillOpacity:.6}),e.jsx(M,{type:"monotone",dataKey:"approvals",stackId:"1",stroke:l.secondary,fill:l.secondary,fillOpacity:.6})]})})})]}),e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsx(o,{children:"Datenquellen Performance"}),e.jsx(m,{children:"Status und Aktivit채t der verschiedenen Quellen"})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-4",children:d.sourcePerformance.map((s,r)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[D(s.status),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:s.source}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Letzter Sync: ",new Date(s.lastSync).toLocaleDateString("de-DE")]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold",children:s.updates.toLocaleString()}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Updates"})]})]},r))})})]})]})}export{J as default};
