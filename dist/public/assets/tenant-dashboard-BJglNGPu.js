import{ae as O,U as R,g as h,j as e,C as n,a as i,b as c,P as u,c as d,B as p,ao as V,S as q,aI as z,J as g,ah as M,ai as S,V as K,aj as W,a0 as b,a8 as $,T as H,l as Z,m as J,n as j,H as N,Z as f}from"./index-Dm22qi9h.js";import{C as Q}from"./crown-_04pdp79.js";import{B as G}from"./building-2-Cf78nhRn.js";import{L as X}from"./lock-DBHjhAGA.js";const U={basic:{name:"Basic Plan",icon:q,monthlyUpdates:50,legalCases:10,dataSources:5,features:["basic.updates","basic.notifications","basic.support"]},professional:{name:"Professional Plan",icon:V,monthlyUpdates:200,legalCases:50,dataSources:20,features:["professional.analytics","professional.support","professional.reports","professional.api"]},enterprise:{name:"Enterprise Plan",icon:Q,monthlyUpdates:1e3,legalCases:500,dataSources:100,features:["Unbegrenzte Updates","Dedicated Support","White-label","Custom Integrations"]}};function te(){const[,C]=O(),{t:Y}=R(),{data:x,isLoading:w,error:k}=h({queryKey:["/api/tenant/context"],retry:3,staleTime:5*60*1e3,refetchOnWindowFocus:!1}),{data:T,isLoading:L,error:P}=h({queryKey:["/api/tenant/dashboard/stats"],retry:3,staleTime:0,gcTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0,enabled:!!x}),{data:o,isLoading:y,error:A}=h({queryKey:["/api/tenant/regulatory-updates"],retry:3,staleTime:0,gcTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0,enabled:!!x});if(w||L||y)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:e.jsx("div",{className:"bg-white/80 backdrop-blur-lg rounded-3xl p-8 shadow-2xl border border-white/20",children:e.jsxs("div",{className:"animate-pulse flex space-x-4",children:[e.jsx("div",{className:"rounded-full bg-blue-200 h-12 w-12"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-blue-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-blue-200 rounded w-1/2"})]})]})})});if(k||P||A)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-6",children:e.jsxs(n,{className:"w-full max-w-md",children:[e.jsxs(i,{className:"text-center",children:[e.jsx(c,{className:"text-red-600",children:"Verbindungsfehler"}),e.jsx(u,{children:"Es gab ein Problem beim Laden der Daten"})]}),e.jsx(d,{className:"text-center",children:e.jsx(p,{onClick:()=>window.location.reload(),className:"mt-4",children:"Seite neu laden"})})]})});if(w)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:e.jsx("div",{className:"bg-white/80 backdrop-blur-lg rounded-3xl p-8 shadow-2xl border border-white/20",children:e.jsxs("div",{className:"animate-pulse flex space-x-4",children:[e.jsx("div",{className:"rounded-full bg-blue-200 h-12 w-12"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-blue-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-blue-200 rounded w-1/2"})]})]})})});const r=x,s=T,t=U[(r==null?void 0:r.subscriptionTier)||"basic"],v=t.icon,D=s?s.monthlyUsage/t.monthlyUpdates*100:0,I=()=>{C("/tenant/auth")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 relative",children:[e.jsx("div",{className:"fixed top-4 right-4 z-50",children:e.jsx(z,{})}),e.jsx("header",{className:"bg-white/80 backdrop-blur-lg border-b border-white/20 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-3 rounded-2xl",children:e.jsx(G,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-900 to-purple-900 bg-clip-text text-transparent",children:(r==null?void 0:r.name)||"Tenant Dashboard"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Regulatory Intelligence Portal"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(g,{variant:"secondary",className:"bg-blue-100 text-blue-900 hover:bg-blue-200",children:[e.jsx(v,{className:"h-3 w-3 mr-1"}),t.name]}),e.jsx(p,{variant:"outline",onClick:I,"data-testid":"button-logout",children:"Abmelden"})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsxs(M,{className:"mb-6 bg-gradient-to-r from-blue-50 to-purple-50 border-blue-200",children:[e.jsx(v,{className:"h-4 w-4 text-blue-600"}),e.jsxs(S,{className:"text-blue-900",children:["Sie verwenden den ",e.jsx("strong",{children:t.name}),". Monatliche Nutzung: ",(s==null?void 0:s.monthlyUsage)||0," von ",t.monthlyUpdates," Updates"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs(n,{className:"bg-white/80 backdrop-blur-lg border-white/20 shadow-xl",children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium text-gray-600",children:"Monatliche Nutzung"}),e.jsx(K,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:(s==null?void 0:s.monthlyUsage)||0}),e.jsx(W,{value:D,className:"mt-2"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["von ",t.monthlyUpdates," verfügbar"]})]})]}),e.jsxs(n,{className:"bg-white/80 backdrop-blur-lg border-white/20 shadow-xl",children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium text-gray-600",children:"Verfügbare Updates"}),e.jsx(b,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-900",children:(s==null?void 0:s.totalUpdates)||0}),e.jsx("p",{className:"text-xs text-gray-500",children:"Aktuelle Regulatory Intelligence"})]})]}),e.jsxs(n,{className:"bg-white/80 backdrop-blur-lg border-white/20 shadow-xl",children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium text-gray-600",children:"Rechtsfälle"}),e.jsx($,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-900",children:(s==null?void 0:s.totalLegalCases)||0}),e.jsx("p",{className:"text-xs text-gray-500",children:"Verfügbare Analysen"})]})]}),e.jsxs(n,{className:"bg-white/80 backdrop-blur-lg border-white/20 shadow-xl",children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium text-gray-600",children:"Datenquellen"}),e.jsx(H,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-900",children:(s==null?void 0:s.activeDataSources)||0}),e.jsxs("p",{className:"text-xs text-gray-500",children:["von ",t.dataSources," erlaubt"]})]})]})]}),e.jsxs(Z,{defaultValue:"updates",className:"space-y-6",children:[e.jsxs(J,{className:"grid w-full grid-cols-3 bg-white/50 backdrop-blur-lg",children:[e.jsx(j,{value:"updates","data-testid":"tab-updates",children:"Updates"}),e.jsx(j,{value:"features","data-testid":"tab-features",children:"Features"}),e.jsx(j,{value:"upgrade","data-testid":"tab-upgrade",children:"Upgrade"})]}),e.jsx(N,{value:"updates",className:"space-y-4",children:e.jsxs(n,{className:"bg-white/80 backdrop-blur-lg border-white/20 shadow-xl",children:[e.jsxs(i,{children:[e.jsxs(c,{className:"flex items-center space-x-2",children:[e.jsx(b,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:"Aktuelle Regulatory Intelligence"})]}),e.jsxs(u,{children:["Für Ihr ",t.name," Abonnement verfügbare Updates"]})]}),e.jsx(d,{children:y?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(a=>e.jsxs("div",{className:"animate-pulse flex space-x-4",children:[e.jsx("div",{className:"rounded-full bg-gray-200 h-10 w-10"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},a))}):o&&o.length>0?e.jsx("div",{className:"space-y-4",children:o.slice(0,t.monthlyUpdates===50?3:10).map((a,l)=>e.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-blue-900",children:a.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a.description}),e.jsx(g,{variant:"outline",className:"mt-2 text-xs",children:a.type||"regulatory"})]},a.id||l))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(b,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Keine Updates verfügbar"})]})})]})}),e.jsx(N,{value:"features",className:"space-y-4",children:e.jsxs(n,{className:"bg-white/80 backdrop-blur-lg border-white/20 shadow-xl",children:[e.jsxs(i,{children:[e.jsxs(c,{className:"flex items-center space-x-2",children:[e.jsx(f,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{children:"Verfügbare Features"})]}),e.jsxs(u,{children:["Funktionen Ihres ",t.name," Abonnements"]})]}),e.jsx(d,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.features.map((a,l)=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gradient-to-r from-green-50 to-blue-50 rounded-lg",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-full",children:e.jsx(f,{className:"h-4 w-4 text-green-600"})}),e.jsx("span",{className:"font-medium text-green-900",children:a})]},l))})})]})}),e.jsx(N,{value:"upgrade",className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Object.entries(U).map(([a,l])=>{const F=l.icon,m=a===(r==null?void 0:r.subscriptionTier);return e.jsxs(n,{className:`relative overflow-hidden ${m?"bg-gradient-to-br from-blue-50 to-purple-50 border-blue-300 shadow-xl":"bg-white/80 backdrop-blur-lg border-white/20 shadow-lg"}`,children:[m&&e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx(g,{className:"bg-blue-600 text-white",children:"Aktuell"})}),e.jsx(i,{children:e.jsxs(c,{className:"flex items-center space-x-2",children:[e.jsx(F,{className:`h-6 w-6 ${a==="basic"?"text-gray-600":a==="professional"?"text-blue-600":"text-purple-600"}`}),e.jsx("span",{children:l.name})]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Monatliche Updates: ",e.jsx("strong",{children:l.monthlyUpdates})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Rechtsfälle: ",e.jsx("strong",{children:l.legalCases})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Datenquellen: ",e.jsx("strong",{children:l.dataSources})]})]}),e.jsx("div",{className:"space-y-2",children:l.features.map((B,E)=>e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(f,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{children:B})]},E))}),!m&&e.jsxs(p,{className:"w-full",disabled:!0,"data-testid":`button-upgrade-${a}`,children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Upgrade erforderlich"]})]})]},a)})})})]})]})]})}export{te as default};
