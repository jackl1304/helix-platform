import{aK as C,r as j,g as f,j as e,B as u,_ as S,C as i,a as l,c as n,b as c,W as y,d as N,J as p,ao as k,P as B,V as K,a1 as P}from"./index-Dm22qi9h.js";import{C as E}from"./customer-navigation-B5k3fS1T.js";import{T}from"./target-D1Y3eE8V.js";import"./clipboard-anxMjb0Z.js";const w="030d3e01-32c4-4f95-8d54-98be948e8d4b";function M(){var g;const{themeSettings:A,getThemeColors:b}=C(),s=b(),[o,v]=j.useState(!0);j.useEffect(()=>()=>{v(!1)},[]);const{data:t,isLoading:h}=f({queryKey:["/api/customer/tenant",w],queryFn:async()=>{const a=await fetch(`/api/customer/tenant/${w}`);if(!a.ok)throw new Error("Failed to fetch tenant data");return await a.json()},enabled:o,retry:1}),{data:$,isLoading:m,error:x}=f({queryKey:["/api/customer/ai-analysis"],queryFn:async()=>{const a=await fetch("/api/customer/ai-analysis");if(!a.ok)throw new Error("Failed to fetch AI insights");return await a.json()},enabled:o&&((g=t==null?void 0:t.customerPermissions)==null?void 0:g.aiInsights),retry:1}),I=(t==null?void 0:t.customerPermissions)||{dashboard:!0,aiInsights:!0,regulatoryUpdates:!1,legalCases:!1,knowledgeBase:!1,newsletters:!1,analytics:!1,reports:!1,dataCollection:!1,globalSources:!1,historicalData:!1,administration:!1,userManagement:!1,systemSettings:!1,auditLogs:!1,advancedAnalytics:!1};if(h)return e.jsx("div",{className:"flex min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"animate-pulse space-y-4 p-6 flex-1 ml-64",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded"})]})});const r=$||[];return e.jsxs("div",{className:`flex min-h-screen ${s.background}`,children:[e.jsx(E,{permissions:I,tenantName:t==null?void 0:t.name}),e.jsx("div",{className:"flex-1 ml-64",children:e.jsxs("div",{className:"container mx-auto p-6 space-y-8 max-w-6xl",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-4xl font-bold ${s.textPrimary} mb-2`,children:"KI-Insights"}),e.jsx("p",{className:`text-lg ${s.textSecondary}`,children:"Intelligente Analysen und Vorhersagen für Ihr Unternehmen"})]}),e.jsxs(u,{className:`bg-gradient-to-r ${s.primary} text-white hover:opacity-90`,children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Insights aktualisieren"]})]}),(h||m)&&e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[1,2,3].map(a=>e.jsxs(i,{className:`${s.cardBg} animate-pulse`,children:[e.jsxs(l,{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),e.jsx(n,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-5/6"})]})})]},a))}),x&&e.jsxs(i,{className:`${s.cardBg} border-red-200`,children:[e.jsx(l,{children:e.jsxs(c,{className:"text-red-600 flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5"}),"Fehler beim Laden der KI-Insights"]})}),e.jsx(n,{children:e.jsx("p",{className:"text-gray-600",children:"Die KI-Insights konnten nicht geladen werden. Bitte versuchen Sie es später erneut."})})]}),!m&&!x&&r&&r.length>0&&e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:r.map(a=>e.jsxs(i,{className:`${s.cardBg} hover:shadow-lg transition-shadow`,children:[e.jsxs(l,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:`h-5 w-5 ${s.accent}`}),e.jsx(p,{variant:a.priority==="high"?"destructive":a.priority==="medium"?"default":"secondary",children:a.priority==="high"?"Hoch":a.priority==="medium"?"Mittel":"Niedrig"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"h-4 w-4 text-yellow-500"}),e.jsxs("span",{className:"text-sm font-medium",children:[a.confidence,"%"]})]})]}),e.jsx(c,{className:`text-lg ${s.textPrimary} mt-2`,children:a.title}),e.jsx(B,{className:`${s.textSecondary}`,children:a.summary})]}),e.jsxs(n,{className:"pt-0",children:[e.jsx("p",{className:`text-sm ${s.textSecondary} mb-4 line-clamp-3`,children:a.content}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:a.tags.map(d=>e.jsx(p,{variant:"outline",className:"text-xs",children:d},d))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[e.jsx(K,{className:"h-3 w-3"}),new Date(a.createdAt).toLocaleDateString("de-DE")]}),e.jsx(u,{variant:"outline",size:"sm",children:"Details anzeigen"})]})]})]},a.id))}),!m&&!x&&(!r||r.length===0)&&e.jsxs(i,{className:`${s.cardBg}`,children:[e.jsx(l,{children:e.jsxs(c,{className:`${s.textPrimary} flex items-center gap-2`,children:[e.jsx(N,{className:"h-5 w-5"}),"Keine KI-Insights verfügbar"]})}),e.jsx(n,{children:e.jsx("p",{className:`${s.textSecondary}`,children:"Derzeit sind keine KI-Insights verfügbar. Das System analysiert kontinuierlich neue Daten."})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(i,{className:`${s.cardBg}`,children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:`text-sm font-medium ${s.textSecondary}`,children:"Insights gesamt"}),e.jsx(P,{className:`h-4 w-4 ${s.accent}`})]}),e.jsxs(n,{children:[e.jsx("div",{className:`text-2xl font-bold ${s.textPrimary}`,children:r.length}),e.jsx("p",{className:`text-xs ${s.textSecondary}`,children:"Verfügbare KI-Analysen"})]})]}),e.jsxs(i,{className:`${s.cardBg}`,children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:`text-sm font-medium ${s.textSecondary}`,children:"Hohe Priorität"}),e.jsx(y,{className:"h-4 w-4 text-red-500"})]}),e.jsxs(n,{children:[e.jsx("div",{className:`text-2xl font-bold ${s.textPrimary}`,children:r.filter(a=>a.priority==="high").length}),e.jsx("p",{className:`text-xs ${s.textSecondary}`,children:"Wichtige Erkenntnisse"})]})]}),e.jsxs(i,{className:`${s.cardBg}`,children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:`text-sm font-medium ${s.textSecondary}`,children:"Durchschnittliche Genauigkeit"}),e.jsx(T,{className:`h-4 w-4 ${s.accent}`})]}),e.jsxs(n,{children:[e.jsxs("div",{className:`text-2xl font-bold ${s.textPrimary}`,children:[r.length>0?Math.round(r.reduce((a,d)=>a+d.confidence,0)/r.length):0,"%"]}),e.jsx("p",{className:`text-xs ${s.textSecondary}`,children:"KI-Vertrauenswert"})]})]})]})]})})]})}export{M as default};
