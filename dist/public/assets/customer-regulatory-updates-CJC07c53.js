import{aK as p,ap as y,g as f,j as e,C as n,a as j,b as v,J as d,P as b,c,G as N,a0 as w}from"./index-Dm22qi9h.js";import{C}from"./customer-navigation-B5k3fS1T.js";import{u as S}from"./use-live-tenant-permissions-XuPhfx9r.js";import{C as A}from"./calendar-B2qkWIGY.js";import"./clipboard-anxMjb0Z.js";const T="030d3e01-32c4-4f95-8d54-98be948e8d4b";function E(){const{themeSettings:_,getThemeColors:o}=p();o();const m=y().tenantId||T,{permissions:g,tenantName:x,isLoading:h}=S({tenantId:m,pollInterval:3e3}),r=g||{dashboard:!0,regulatoryUpdates:!0,legalCases:!1,knowledgeBase:!1,newsletters:!1,analytics:!1,reports:!1,dataCollection:!1,globalSources:!1,historicalData:!1,administration:!1,userManagement:!1,systemSettings:!1,auditLogs:!1,aiInsights:!1,advancedAnalytics:!1},{data:l,isLoading:u}=f({queryKey:["/api/tenant/regulatory-updates"],queryFn:async()=>{const s=await fetch("/api/tenant/regulatory-updates",{cache:"no-store"});if(!s.ok)throw new Error("Failed to fetch regulatory updates");const t=await s.json();return(Array.isArray(t)?t:(t==null?void 0:t.data)||[]).map(a=>({id:a.id??a.uuid??Math.random().toString(36).slice(2),title:String(a.title??a.name??"Ohne Titel"),summary:String(a.summary??a.description??""),region:String(a.region??"Global"),published_date:a.published_date||a.published_at||a.date||new Date().toISOString(),priority:String(a.priority??"medium"),device_types:Array.isArray(a.device_types)?a.device_types:[]}))},staleTime:6e4,retry:2,refetchOnWindowFocus:!1,keepPreviousData:!0,enabled:!!(r!=null&&r.regulatoryUpdates)});return h?e.jsx("div",{className:"flex h-screen bg-gray-50",children:e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx(C,{permissions:r,tenantName:x||"Customer Portal"}),e.jsx("main",{className:"ml-64 flex-1 p-8 overflow-y-auto",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Regulatory Intelligence"}),e.jsx("p",{className:"text-gray-600",children:"Aktuelle regulatorische Änderungen und Updates"})]}),u?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(s=>e.jsxs("div",{className:"bg-white rounded-lg p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded mb-2"})]},s))}):l&&Array.isArray(l)&&l.length>0?e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:l.map(s=>e.jsxs(n,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(v,{className:"text-lg font-semibold line-clamp-2",children:s.title}),e.jsx(d,{variant:s.priority==="high"?"destructive":"default",children:s.priority})]}),e.jsx(b,{className:"line-clamp-2",children:s.summary})]}),e.jsxs(c,{children:[e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{children:s.region})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(s.published_date||Date.now()).toLocaleDateString("de-DE")})]})]}),s.device_types&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:s.device_types.slice(0,3).map((t,i)=>e.jsx(d,{variant:"outline",className:"text-xs",children:t},i))})]})]},s.id))}):e.jsx(n,{children:e.jsxs(c,{className:"text-center py-12",children:[e.jsx(w,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Keine Regulatory Intelligence Einträge verfügbar"}),e.jsx("p",{className:"text-gray-500",children:"Aktuell sind keine regulatorischen Updates vorhanden."})]})})]})})]})}export{E as default};
