import{e as w,u as I,f as R,g as k,h as p,j as e,C as d,a as o,b as u,P as m,c as x,L as h,J as a,B as g,_ as f,k as j,R as N,K as D}from"./index-Dm22qi9h.js";import{D as v}from"./download-CQfvf7I6.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=w("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);function E(){const{toast:n}=I(),r=R(),{data:s,isLoading:b}=k({queryKey:["/api/grip/status"],refetchInterval:3e4}),i=p({mutationFn:()=>N("/api/grip/test-connection"),onSuccess:t=>{n({title:"Verbindungstest",description:t.success?"GRIP-Verbindung erfolgreich!":"GRIP-Verbindung fehlgeschlagen",variant:t.success?"default":"destructive"}),r.invalidateQueries({queryKey:["/api/grip/status"]})},onError:t=>{n({title:"Verbindungsfehler",description:"Fehler beim Testen der GRIP-Verbindung",variant:"destructive"})}}),c=p({mutationFn:()=>N("/api/grip/extract"),onSuccess:t=>{n({title:"Datenextraktion erfolgreich",description:`${t.count} Einträge von GRIP extrahiert`}),r.invalidateQueries({queryKey:["/api/dashboard/stats"]}),r.invalidateQueries({queryKey:["/api/regulatory-updates/recent"]})},onError:t=>{n({title:"Extraktionsfehler",description:"Fehler beim Extrahieren der GRIP-Daten",variant:"destructive"})}}),y=t=>{switch(t){case"connected":return"bg-green-500";case"disconnected":return"bg-red-500";default:return"bg-yellow-500"}},P=t=>{switch(t){case"connected":return e.jsx(j,{className:"h-4 w-4"});case"disconnected":return e.jsx(D,{className:"h-4 w-4"});default:return e.jsx(f,{className:"h-4 w-4"})}};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"GRIP Datenquelle"}),e.jsx("p",{className:"text-muted-foreground",children:"Regulatorische Intelligenz von GRIP Platform"})]})}),e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${y((s==null?void 0:s.status)||"unknown")}`}),"GRIP Platform Status"]}),e.jsx(m,{children:"Verbindungsstatus zur GRIP Regulatory Intelligence Platform"})]}),e.jsxs(x,{className:"space-y-4",children:[b?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Status wird geladen..."})]}):s?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Status:"}),e.jsxs(a,{variant:s.status==="connected"?"default":"destructive",children:[P(s.status),s.status==="connected"?"Verbunden":"Getrennt"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Platform:"}),e.jsx("span",{className:"text-sm",children:s.platform})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Authentifiziert:"}),e.jsx(a,{variant:s.authenticated?"default":"destructive",children:s.authenticated?"Ja":"Nein"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Endpoint:"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.endpoint})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Letzte Prüfung:"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(s.lastCheck).toLocaleString("de-DE")})]})]})]}):e.jsx("div",{className:"text-center text-muted-foreground",children:"Status konnte nicht geladen werden"}),e.jsx("div",{className:"flex gap-2 pt-4",children:e.jsxs(g,{variant:"outline",onClick:()=>i.mutate(),disabled:i.isPending,children:[i.isPending?e.jsx(h,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(f,{className:"h-4 w-4 mr-2"}),"Verbindung testen"]})})]})]}),e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-5 w-5"}),"Datenextraktion"]}),e.jsx(m,{children:"Extrahiere regulatorische Daten von der GRIP Platform"})]}),e.jsxs(x,{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx("p",{children:"Die GRIP Platform bietet umfassende regulatorische Intelligenz für die Medizintechnik-Industrie. Durch die Extraktion werden automatisch neue regulatorische Updates, Sicherheitswarnungen und Zulassungsinformationen in das Helix-System importiert."})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Verfügbare Datenquellen:"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[e.jsx(a,{variant:"outline",children:"Regulatory Updates"}),e.jsx(a,{variant:"outline",children:"Device Approvals"}),e.jsx(a,{variant:"outline",children:"Safety Alerts"}),e.jsx(a,{variant:"outline",children:"Guidance Documents"}),e.jsx(a,{variant:"outline",children:"Market Surveillance"}),e.jsx(a,{variant:"outline",children:"Standards Updates"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsxs(g,{onClick:()=>c.mutate(),disabled:c.isPending,className:"bg-[#d95d2c] hover:bg-[#b8491f] text-white",children:[c.isPending?e.jsx(h,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(v,{className:"h-4 w-4 mr-2"}),"Daten extrahieren"]}),e.jsxs(g,{variant:"outline",onClick:async()=>{try{const l=await(await fetch("/api/grip/extract",{method:"POST",headers:{"Content-Type":"application/json"}})).json();l.success?n({title:"GRIP Extraktion erfolgreich",description:`${l.count||0} Einträge extrahiert`}):n({title:"GRIP Extraktion fehlgeschlagen",description:l.message||"Unbekannter Fehler",variant:"destructive"})}catch{n({title:"Fehler bei GRIP Extraktion",description:"Netzwerk- oder Serverfehler",variant:"destructive"})}},className:"ml-2",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Test Extraktion"]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[e.jsx(j,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"GRIP Platform Status"})]}),e.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["✅ Auth0-Authentifizierung erfolgreich",e.jsx("br",{}),"✅ Datenextraktion funktional",e.jsx("br",{}),"✅ 3 GRIP-Einträge erfolgreich importiert"]})]})]})]}),e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsx(u,{children:"Integration Details"}),e.jsx(m,{children:"Informationen zur GRIP Platform Integration"})]}),e.jsxs(x,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Datenquelle:"}),e.jsx("br",{}),e.jsx("span",{className:"text-muted-foreground",children:"GRIP Regulatory Intelligence"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Sync Frequenz:"}),e.jsx("br",{}),e.jsx("span",{className:"text-muted-foreground",children:"Täglich (automatisch)"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Region:"}),e.jsx("br",{}),e.jsx("span",{className:"text-muted-foreground",children:"Global"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Datentyp:"}),e.jsx("br",{}),e.jsx("span",{className:"text-muted-foreground",children:"Regulatory Intelligence"})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-800",children:[e.jsx(j,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Sichere Auth0-Verbindung"})]}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Die Verbindung zur GRIP Platform nutzt Auth0-Authentifizierung (grip-app.us.auth0.com) mit erweiterten Bot-Verschleierungsmaßnahmen."})]})]})]})]})}export{E as default};
