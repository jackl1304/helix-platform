import{e as K,u as L,f as z,r as U,g as D,h as u,j as e,C as l,a as n,b as c,_ as d,P as o,c as r,B as x,l as $,m as B,n as N,H as f,D as A,K as V,A as H,V as R,J as y,a1 as k,S as w,k as q,R as h,aj as J}from"./index-Dm22qi9h.js";import{D as S}from"./download-CQfvf7I6.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=K("Rss",[["path",{d:"M4 11a9 9 0 0 1 9 9",key:"pv89mb"}],["path",{d:"M4 4a16 16 0 0 1 16 16",key:"k0647b"}],["circle",{cx:"5",cy:"19",r:"1",key:"bfqh0e"}]]);function Y(){const{toast:a}=L(),p=z(),[t,i]=U.useState(null),{data:_,isLoading:G}=D({queryKey:["/api/phase1/status"],refetchInterval:3e4}),{data:g,isLoading:P}=D({queryKey:["/api/rss/feeds-status"],refetchInterval:3e4}),M=u({mutationFn:()=>h("/api/fda/sync-510k","POST"),onSuccess:()=>{a({title:"FDA 510(k) Sync",description:"Successfully synced FDA 510(k) clearances"}),p.invalidateQueries({queryKey:["/api/dashboard/stats"]}),i(null)},onError:s=>{a({title:"FDA 510(k) Sync Failed",description:s.message,variant:"destructive"}),i(null)}}),Q=u({mutationFn:()=>h("/api/fda/sync-recalls","POST"),onSuccess:()=>{a({title:"FDA Recalls Sync",description:"Successfully synced FDA device recalls"}),p.invalidateQueries({queryKey:["/api/dashboard/stats"]}),i(null)},onError:s=>{a({title:"FDA Recalls Sync Failed",description:s.message,variant:"destructive"}),i(null)}}),T=u({mutationFn:()=>h("/api/fda/sync-all","POST"),onSuccess:()=>{a({title:"Complete FDA Sync",description:"Successfully synced all FDA data sources"}),p.invalidateQueries({queryKey:["/api/dashboard/stats"]}),i(null)},onError:s=>{a({title:"Complete FDA Sync Failed",description:s.message,variant:"destructive"}),i(null)}}),O=u({mutationFn:()=>h("/api/rss/monitor-feeds","POST"),onSuccess:()=>{a({title:"RSS Monitoring",description:"Successfully completed RSS monitoring cycle"}),p.invalidateQueries({queryKey:["/api/rss/feeds-status"]}),i(null)},onError:s=>{a({title:"RSS Monitoring Failed",description:s.message,variant:"destructive"}),i(null)}}),F=u({mutationFn:()=>h("/api/rss/start-monitoring","POST"),onSuccess:()=>{a({title:"Continuous RSS Monitoring",description:"Started continuous RSS monitoring service"}),p.invalidateQueries({queryKey:["/api/rss/feeds-status"]})},onError:s=>{a({title:"RSS Start Failed",description:s.message,variant:"destructive"})}}),m=u({mutationFn:()=>h("/api/quality/analyze","POST"),onSuccess:s=>{a({title:"Data Quality Analysis",description:`Analyzed ${s.metrics.totalUpdates} updates with average score ${s.metrics.averageQualityScore.toFixed(1)}`}),i(null)},onError:s=>{a({title:"Quality Analysis Failed",description:s.message,variant:"destructive"}),i(null)}}),E=u({mutationFn:s=>h("/api/quality/find-duplicates","POST",{threshold:s}),onSuccess:s=>{a({title:"Duplicate Detection",description:`Found ${s.total} potential duplicates from ${s.analyzed} updates`}),i(null)},onError:s=>{a({title:"Duplicate Detection Failed",description:s.message,variant:"destructive"}),i(null)}}),v=u({mutationFn:()=>h("/api/phase1/sync-all","POST"),onSuccess:s=>{a({title:"Phase 1 Complete Sync",description:`Successfully completed comprehensive sync. Quality score: ${s.qualityReport.averageScore}`}),p.invalidateQueries({queryKey:["/api/dashboard/stats"]}),i(null)},onError:s=>{a({title:"Phase 1 Sync Failed",description:s.message,variant:"destructive"}),i(null)}}),j=(s,b)=>{i(s),b.mutate()},I=s=>{switch(s){case"monitoring":return"bg-green-500";case"idle":return"bg-yellow-500";default:return"bg-gray-500"}};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Phase 1 Integration Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage FDA OpenAPI, RSS Monitoring, and Data Quality Services"})]}),e.jsxs(l,{className:"mb-6",children:[e.jsxs(n,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(d,{className:"h-5 w-5"}),"Quick Actions"]}),e.jsx(o,{children:"Execute comprehensive Phase 1 synchronization"})]}),e.jsxs(r,{children:[e.jsx(x,{onClick:()=>j("phase1-complete",v),disabled:!!t,className:"w-full",children:t==="phase1-complete"?e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"mr-2 h-4 w-4 animate-spin"}),"Running Complete Phase 1 Sync..."]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Execute Complete Phase 1 Sync"]})}),v.data&&e.jsxs("div",{className:"mt-4 p-4 bg-green-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-800",children:"Last Sync Results:"}),e.jsxs("ul",{className:"text-sm text-green-700 mt-2",children:[e.jsxs("li",{children:["Total Updates: ",v.data.qualityReport.totalUpdates]}),e.jsxs("li",{children:["Average Quality Score: ",v.data.qualityReport.averageScore]}),e.jsxs("li",{children:["Duplicates Found: ",v.data.qualityReport.duplicates]})]})]})]})]}),e.jsxs($,{defaultValue:"fda",className:"space-y-6",children:[e.jsxs(B,{className:"grid w-full grid-cols-4",children:[e.jsx(N,{value:"fda",children:"FDA OpenAPI"}),e.jsx(N,{value:"rss",children:"RSS Monitoring"}),e.jsx(N,{value:"quality",children:"Data Quality"}),e.jsx(N,{value:"overview",children:"Overview"})]}),e.jsx(f,{value:"fda",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),"FDA 510(k) Devices"]}),e.jsx(o,{children:"Sync latest 510(k) clearances from FDA OpenAPI"})]}),e.jsx(r,{children:e.jsx(x,{onClick:()=>j("fda-510k",M),disabled:!!t,className:"w-full",children:t==="fda-510k"?e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"mr-2 h-4 w-4 animate-spin"}),"Syncing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Sync 510(k) Data"]})})})]}),e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5"}),"FDA Device Recalls"]}),e.jsx(o,{children:"Sync latest device recalls from FDA OpenAPI"})]}),e.jsx(r,{children:e.jsx(x,{onClick:()=>j("fda-recalls",Q),disabled:!!t,className:"w-full",children:t==="fda-recalls"?e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"mr-2 h-4 w-4 animate-spin"}),"Syncing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Sync Recalls Data"]})})})]}),e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"}),"Complete FDA Sync"]}),e.jsx(o,{children:"Comprehensive sync of all FDA data sources"})]}),e.jsx(r,{children:e.jsx(x,{onClick:()=>j("fda-complete",T),disabled:!!t,className:"w-full",children:t==="fda-complete"?e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"mr-2 h-4 w-4 animate-spin"}),"Syncing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Complete FDA Sync"]})})})]})]})}),e.jsxs(f,{value:"rss",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"Monitor RSS Feeds"]}),e.jsx(o,{children:"Run monitoring cycle for all active RSS feeds"})]}),e.jsx(r,{children:e.jsx(x,{onClick:()=>j("rss-monitor",O),disabled:!!t,className:"w-full",children:t==="rss-monitor"?e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"mr-2 h-4 w-4 animate-spin"}),"Monitoring..."]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Run RSS Monitoring"]})})})]}),e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5"}),"Start Continuous Monitoring"]}),e.jsx(o,{children:"Enable automatic RSS monitoring service"})]}),e.jsx(r,{children:e.jsx(x,{onClick:()=>F.mutate(),disabled:F.isPending,className:"w-full",children:F.isPending?e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"mr-2 h-4 w-4 animate-spin"}),"Starting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Start Continuous Monitoring"]})})})]})]}),e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsx(c,{children:"RSS Feeds Status"}),e.jsx(o,{children:"Current status of all configured RSS feeds"})]}),e.jsx(r,{children:P?e.jsx("div",{className:"text-center py-4",children:"Loading RSS status..."}):g&&g.length>0?e.jsx("div",{className:"space-y-3",children:g.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${I(s.status)}`}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:s.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.authority," - ",s.region]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(y,{variant:s.active?"default":"secondary",children:s.active?"Active":"Inactive"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Check every ",s.checkFrequency,"min"]})]})]},s.id))}):e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No RSS feeds configured"})})]})]}),e.jsxs(f,{value:"quality",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-5 w-5"}),"Quality Analysis"]}),e.jsx(o,{children:"Comprehensive data quality assessment"})]}),e.jsx(r,{children:e.jsx(x,{onClick:()=>j("quality-analysis",m),disabled:!!t,className:"w-full",children:t==="quality-analysis"?e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"mr-2 h-4 w-4 animate-spin"}),"Analyzing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),"Run Quality Analysis"]})})})]}),e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"}),"Find Duplicates"]}),e.jsx(o,{children:"Detect potential duplicate entries"})]}),e.jsx(r,{children:e.jsx(x,{onClick:()=>j("duplicates",()=>E.mutate(.85)),disabled:!!t,className:"w-full",children:t==="duplicates"?e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"mr-2 h-4 w-4 animate-spin"}),"Detecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),"Find Duplicates (85%)"]})})})]}),e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5"}),"Data Standardization"]}),e.jsx(o,{children:"Clean and standardize data formats"})]}),e.jsx(r,{children:e.jsx(x,{onClick:()=>{i("clean-batch"),h("/api/quality/clean-batch",{method:"POST"}).then(()=>{a({title:"Data Cleaning",description:"Successfully cleaned data batch"}),i(null)}).catch(s=>{a({title:"Data Cleaning Failed",description:s.message,variant:"destructive"}),i(null)})},disabled:!!t,className:"w-full",children:t==="clean-batch"?e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"mr-2 h-4 w-4 animate-spin"}),"Cleaning..."]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Clean Data Batch"]})})})]})]}),m.data&&e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(c,{children:"Quality Analysis Results"})}),e.jsxs(r,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:m.data.metrics.totalUpdates}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Updates"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:m.data.metrics.validUpdates}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Valid Updates"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:m.data.metrics.averageQualityScore.toFixed(1)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Score"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:m.data.metrics.duplicateCount}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Duplicates"})]})]}),e.jsx(J,{value:m.data.metrics.averageQualityScore,className:"mb-4"}),m.data.recommendations.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Recommendations:"}),e.jsx("ul",{className:"space-y-1",children:m.data.recommendations.map((s,b)=>e.jsxs("li",{className:"text-sm text-muted-foreground",children:["• ",s]},b))})]})]})]})]}),e.jsx(f,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(l,{children:[e.jsx(n,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),"FDA OpenAPI"]})}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"510(k) Clearances"}),e.jsx(y,{variant:"outline",children:"Active"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Device Recalls"}),e.jsx(y,{variant:"outline",children:"Active"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Rate Limit"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"1/sec"})]})]})})]}),e.jsxs(l,{children:[e.jsx(n,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"RSS Monitoring"]})}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Active Feeds"}),e.jsx(y,{variant:"outline",children:(g==null?void 0:g.filter(s=>s.active).length)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Authorities"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"6"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Check Frequency"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"30min"})]})]})})]}),e.jsxs(l,{children:[e.jsx(n,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"}),"Data Quality"]})}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Quality Threshold"}),e.jsx(y,{variant:"outline",children:"70%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Duplicate Detection"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"85%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Auto Cleaning"}),e.jsx(y,{variant:"outline",children:"Enabled"})]})]})})]})]})})]})]})}export{Y as default};
