import{e as L,u as K,ae as B,r as c,h as F,j as e,d as f,C as h,a as u,b as g,a7 as N,P as b,c as j,I as G,B as r,Z as S,a0 as v,aa as C,al as I,J as l,k as P,ao as H,T as Q,G as q,V as k,M as V,R as Z}from"./index-Dm22qi9h.js";import{E as U}from"./eye-KEHLO33x.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=L("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);function $(){const{toast:E}=K(),[T]=B(),[i,d]=c.useState(""),[n,m]=c.useState({type:"all",region:"all",timeframe:"all"}),[x,z]=c.useState([]),[t,A]=c.useState(null),[p,o]=c.useState(!1);c.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("q");a&&a.trim()&&(d(a.trim()),o(!0),w.mutate(a.trim()))},[T]);const w=F({mutationFn:async s=>(console.log("[INTELLIGENT-SEARCH] Starting search for:",s),await Z("/api/intelligent-search","POST",{query:s,filters:n})),onSuccess:s=>{console.log("[INTELLIGENT-SEARCH] Search results received:",s),z(s.results||[]),A(s.answer||null),o(!1)},onError:s=>{console.error("[INTELLIGENT-SEARCH] Search error:",s),E({title:"Suchfehler",description:"Fehler bei der intelligenten Suche",variant:"destructive"}),o(!1)}}),y=()=>{i.trim()&&(o(!0),w.mutate(i.trim()))},R=s=>{switch(s){case"regulatory":return e.jsx(v,{className:"h-4 w-4"});case"legal":return e.jsx(C,{className:"h-4 w-4"});case"knowledge":return e.jsx(f,{className:"h-4 w-4"});case"historical":return e.jsx(k,{className:"h-4 w-4"});default:return e.jsx(v,{className:"h-4 w-4"})}},D=s=>{switch(s){case"regulatory":return"bg-blue-100 text-blue-800";case"legal":return"bg-purple-100 text-purple-800";case"knowledge":return"bg-green-100 text-green-800";case"historical":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},M=s=>s>=90?"text-green-600":s>=70?"text-yellow-600":"text-red-600";return e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center",children:[e.jsx(f,{className:"mr-3 h-8 w-8 text-primary"}),"Intelligente Suche"]}),e.jsx("p",{className:"text-muted-foreground",children:"KI-gestützte Suche durch alle Helix-Datenquellen mit intelligenten Antworten"})]})}),e.jsxs(h,{className:"mb-6",children:[e.jsxs(u,{children:[e.jsxs(g,{className:"flex items-center",children:[e.jsx(N,{className:"mr-2 h-5 w-5"}),"Intelligente Abfrage"]}),e.jsx(b,{children:"Stellen Sie Fragen zu regulatorischen Daten, Rechtsfällen oder der Knowledge Base"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx(G,{placeholder:"z.B. 'Was sind die MDR-Anforderungen für Klasse III Geräte?' oder 'Aktuelle FDA-Guidance zu Cybersecurity'",value:i,onChange:s=>d(s.target.value),onKeyPress:s=>s.key==="Enter"&&y(),className:"text-base"})}),e.jsx(r,{onClick:y,disabled:!i.trim()||p,className:"px-8",children:p?e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"mr-2 h-4 w-4 animate-spin"}),"Suche..."]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"mr-2 h-4 w-4"}),"Suchen"]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(r,{variant:n.type==="all"?"default":"outline",size:"sm",onClick:()=>m({...n,type:"all"}),children:"Alle Quellen"}),e.jsxs(r,{variant:n.type==="regulatory"?"default":"outline",size:"sm",onClick:()=>m({...n,type:"regulatory"}),children:[e.jsx(v,{className:"mr-1 h-3 w-3"}),"Regulatorisch"]}),e.jsxs(r,{variant:n.type==="legal"?"default":"outline",size:"sm",onClick:()=>m({...n,type:"legal"}),children:[e.jsx(C,{className:"mr-1 h-3 w-3"}),"Rechtsfälle"]}),e.jsxs(r,{variant:n.type==="knowledge"?"default":"outline",size:"sm",onClick:()=>m({...n,type:"knowledge"}),children:[e.jsx(f,{className:"mr-1 h-3 w-3"}),"Knowledge Base"]})]})]})]}),t&&e.jsxs(h,{className:"mb-6 border-primary/20 bg-primary/5",children:[e.jsx(u,{children:e.jsxs(g,{className:"flex items-center text-primary",children:[e.jsx(I,{className:"mr-2 h-5 w-5"}),"KI-Antwort",e.jsxs(l,{className:`ml-2 ${M(t.confidence)}`,variant:"outline",children:[t.confidence,"% Vertrauen"]})]})}),e.jsxs(j,{className:"space-y-4",children:[e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{className:"text-base leading-relaxed",children:t.answer})}),t.recommendations.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center",children:[e.jsx(P,{className:"mr-2 h-4 w-4 text-green-600"}),"Empfehlungen:"]}),e.jsx("ul",{className:"space-y-1",children:t.recommendations.map((s,a)=>e.jsxs("li",{className:"text-sm flex items-start",children:[e.jsx(H,{className:"mr-2 h-3 w-3 mt-0.5 text-yellow-500 flex-shrink-0"}),s]},a))})]}),t.relatedTopics.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Verwandte Themen:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.relatedTopics.map((s,a)=>e.jsx(l,{variant:"secondary",className:"cursor-pointer",onClick:()=>d(s),children:s},a))})]}),e.jsx("div",{className:"flex items-center justify-between text-sm text-muted-foreground pt-2 border-t",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:["Quellen: ",t.sources.length]}),e.jsx("span",{children:new Date(t.timestamp).toLocaleString("de-DE")})]})})]})]}),x.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold",children:["Suchergebnisse (",x.length,")"]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[e.jsx(Q,{className:"h-4 w-4"}),e.jsx("span",{children:"Nach Relevanz sortiert"})]})]}),e.jsx("div",{className:"grid gap-4",children:x.map(s=>e.jsxs(h,{className:"hover:shadow-lg transition-all duration-200",children:[e.jsxs(u,{children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(l,{className:D(s.type),variant:"secondary",children:[R(s.type),e.jsx("span",{className:"ml-1 capitalize",children:s.type})]}),e.jsx(l,{variant:"outline",children:s.source}),e.jsx(l,{variant:s.dataSource==="database"?"default":s.dataSource==="ai"?"destructive":"secondary",className:s.dataSource==="database"?"bg-blue-100 text-blue-800":s.dataSource==="ai"?"bg-purple-100 text-purple-800":"bg-orange-100 text-orange-800",children:s.dataSource==="database"?"🗄️ Eigene Daten":s.dataSource==="ai"?"🤖 KI-Ergebnis":"🔄 Hybrid"}),s.metadata.region&&e.jsxs(l,{variant:"outline",children:[e.jsx(q,{className:"mr-1 h-3 w-3"}),s.metadata.region]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-green-600",children:[Math.round(s.relevance*100),"% Relevanz"]}),s.metadata.aiConfidence&&e.jsxs("span",{className:"text-xs text-purple-600",children:["KI: ",s.metadata.aiConfidence,"%"]})]})]}),e.jsx(g,{className:"text-lg leading-tight",children:s.title}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{children:new Date(s.date).toLocaleDateString("de-DE")})]}),s.metadata.deviceClass&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(J,{className:"h-4 w-4"}),e.jsx("span",{children:s.metadata.deviceClass})]})]})]}),e.jsxs(j,{children:[e.jsx("p",{className:"text-muted-foreground mb-4 leading-relaxed",children:s.excerpt}),s.metadata.tags&&s.metadata.tags.length>0&&e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:s.metadata.tags.map(a=>e.jsx(l,{variant:"outline",className:"text-xs",children:a},a))})}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:s.metadata.language&&e.jsx("span",{className:"uppercase",children:s.metadata.language})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(r,{variant:"outline",size:"sm",children:[e.jsx(U,{className:"mr-2 h-3 w-3"}),"Details"]}),s.url&&e.jsxs(r,{variant:"outline",size:"sm",children:[e.jsx(V,{className:"mr-2 h-3 w-3"}),"Quelle"]})]})]})]})]},s.id))})]}),i&&!p&&x.length===0&&!t&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(N,{className:"mx-auto h-16 w-16 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Keine Ergebnisse gefunden"}),e.jsx("p",{className:"text-muted-foreground",children:"Versuchen Sie andere Suchbegriffe oder erweitern Sie Ihre Anfrage."})]}),!i&&e.jsxs(h,{children:[e.jsxs(u,{children:[e.jsxs(g,{className:"flex items-center",children:[e.jsx(S,{className:"mr-2 h-5 w-5"}),"Beispielanfragen"]}),e.jsx(b,{children:"Probieren Sie diese intelligenten Suchanfragen aus:"})]}),e.jsx(j,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["MDR-Anforderungen für Klasse III Medizinprodukte","FDA 510(k) Einreichungsverfahren 2025","Cybersecurity-Guidelines für Connected Devices","EMA-Guidance zu Clinical Evidence","BfArM Stellungnahmen zu KI-Medizinprodukten","Swissmedic Zulassungsverfahren Timeline"].map((s,a)=>e.jsxs(r,{variant:"outline",className:"h-auto p-4 text-left justify-start",onClick:()=>d(s),children:[e.jsx(I,{className:"mr-3 h-4 w-4 flex-shrink-0"}),e.jsx("span",{children:s})]},a))})})]})]})}export{$ as default};
