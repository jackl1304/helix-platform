import{u as G,r as P,g as w,h as M,j as e,B as n,l as J,m as Y,n as u,H as h,C as i,a as l,b as r,P as d,w as I,x as B,y as L,z as Z,E as c,c as o,v as T,J as m,_ as X,ah as V,W as g,ai as F,I as x,Q as z,R as K,k as O}from"./index-Dm22qi9h.js";import{S as ee}from"./switch-CWNsPlWW.js";import{D as q}from"./download-CQfvf7I6.js";import{U as H}from"./upload-DF1n5zeu.js";import{M as se}from"./monitor-60QAM5UT.js";const te=[{id:"1",category:"Email",key:"SMTP_HOST",value:"smtp.sendgrid.net",description:"SMTP Server für E-Mail-Versand",type:"string",isEditable:!0,lastModified:"2025-01-25T10:30:00Z"},{id:"2",category:"Email",key:"SMTP_PORT",value:"587",description:"SMTP Port",type:"number",isEditable:!0,lastModified:"2025-01-25T10:30:00Z"},{id:"3",category:"System",key:"DATA_SYNC_INTERVAL",value:"3600",description:"Synchronisationsintervall in Sekunden",type:"number",isEditable:!0,lastModified:"2025-01-20T14:15:00Z"},{id:"4",category:"Security",key:"SESSION_TIMEOUT",value:"7200",description:"Session-Timeout in Sekunden",type:"number",isEditable:!0,lastModified:"2025-01-15T09:45:00Z"},{id:"5",category:"Features",key:"ENABLE_NOTIFICATIONS",value:"true",description:"Push-Benachrichtigungen aktivieren",type:"boolean",isEditable:!0,lastModified:"2025-01-27T08:20:00Z"}],ae=[{component:"Database",status:"healthy",message:"Alle Datenbankverbindungen funktionieren normal",lastCheck:"2025-01-27T11:30:00Z",uptime:"99.98%",responseTime:45},{component:"Email Service",status:"warning",message:"SendGrid API Schlüssel fehlt - E-Mail-Funktionalität eingeschränkt",lastCheck:"2025-01-27T11:30:00Z",uptime:"95.2%",responseTime:120},{component:"Data Collection",status:"healthy",message:"Alle Datenquellen synchronisieren erfolgreich",lastCheck:"2025-01-27T11:30:00Z",uptime:"98.7%",responseTime:200},{component:"External APIs",status:"warning",message:"FDA API antwortet langsam (>2s)",lastCheck:"2025-01-27T11:30:00Z",uptime:"97.1%",responseTime:2100}],ne=[{id:"1",level:"info",message:"Datensammlung erfolgreich abgeschlossen",timestamp:"2025-01-27T11:25:00Z",component:"DataCollectionService",details:"42 neue regulatorische Updates von 8 Quellen gesammelt"},{id:"2",level:"warn",message:"SendGrid API Schlüssel nicht konfiguriert",timestamp:"2025-01-27T11:20:00Z",component:"EmailService",details:"E-Mail-Funktionalität ist eingeschränkt bis API-Schlüssel bereitgestellt wird"},{id:"3",level:"error",message:"FDA API Timeout",timestamp:"2025-01-27T11:15:00Z",component:"FDADataSource",details:"Anfrage an https://api.fda.gov/device/510k.json ist nach 30s abgelaufen"},{id:"4",level:"info",message:"Newsletter erfolgreich versendet",timestamp:"2025-01-27T10:00:00Z",component:"NewsletterService",details:"Wöchentlicher MedTech Update an 1,247 Abonnenten versendet"}],C={healthy:"bg-green-100 text-green-800 border-green-200",warning:"bg-yellow-100 text-yellow-800 border-yellow-200",error:"bg-red-100 text-red-800 border-red-200"},ie={healthy:O,warning:g,error:g},le={info:"bg-blue-100 text-blue-800",warn:"bg-yellow-100 text-yellow-800",error:"bg-red-100 text-red-800"};function ge(){const{toast:p}=G(),[j,U]=P.useState("all"),[v,A]=P.useState({}),{data:y=te,isLoading:re}=w({queryKey:["/api/settings"],enabled:!1}),{data:f=ae,isLoading:de}=w({queryKey:["/api/system/health"],enabled:!1}),{data:_=ne,isLoading:ce}=w({queryKey:["/api/system/logs"],enabled:!1}),E=M({mutationFn:async({id:s,value:t})=>await K(`/api/settings/${s}`,"PATCH",{value:t}),onSuccess:()=>{z.invalidateQueries({queryKey:["/api/settings"]}),A({}),p({title:"Einstellung gespeichert",description:"Die Systemeinstellung wurde erfolgreich aktualisiert."})},onError:()=>{p({title:"Fehler",description:"Einstellung konnte nicht gespeichert werden.",variant:"destructive"})}}),N=M({mutationFn:async()=>await K("/api/system/health/check","POST"),onSuccess:()=>{z.invalidateQueries({queryKey:["/api/system/health"]}),p({title:"Systemprüfung abgeschlossen",description:"Alle Komponenten wurden überprüft."})}}),R=Array.from(new Set(y.map(s=>s.category))),W=j==="all"?y:y.filter(s=>s.category===j),S=s=>new Date(s).toLocaleDateString("de-DE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),b=(s,t)=>{A(a=>({...a,[s]:t}))},Q=s=>{const t=v[s.id]||s.value;E.mutate({id:s.id,value:t})},$=s=>{const t=v[s.id]||s.value;if(!s.isEditable)return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{value:s.value,disabled:!0}),e.jsx(m,{variant:"secondary",children:"Schreibgeschützt"})]});switch(s.type){case"boolean":return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{checked:t==="true",onCheckedChange:a=>b(s.id,a.toString())}),e.jsx("span",{className:"text-sm",children:t==="true"?"Aktiviert":"Deaktiviert"})]});case"number":return e.jsx(x,{type:"number",value:t,onChange:a=>b(s.id,a.target.value)});default:return e.jsx(x,{value:t,onChange:a=>b(s.id,a.target.value)})}},D=s=>{const t=ie[s]||O;return e.jsx(t,{className:"h-4 w-4"})},k=f.every(s=>s.status==="healthy")?"healthy":f.some(s=>s.status==="error")?"error":"warning";return e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Systemeinstellungen"}),e.jsx("p",{className:"text-muted-foreground",children:"Verwalten Sie Systemkonfiguration, Überwachung und Protokolle"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(n,{variant:"outline",children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Einstellungen exportieren"]}),e.jsxs(n,{variant:"outline",children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Konfiguration importieren"]})]})]}),e.jsxs(J,{defaultValue:"settings",className:"space-y-6",children:[e.jsxs(Y,{children:[e.jsx(u,{value:"settings",children:"Einstellungen"}),e.jsx(u,{value:"health",children:"Systemstatus"}),e.jsx(u,{value:"logs",children:"Systemprotokolle"}),e.jsx(u,{value:"backup",children:"Backup & Wiederherstellung"})]}),e.jsx(h,{value:"settings",children:e.jsx("div",{className:"grid gap-6",children:e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsx(r,{children:"Systemkonfiguration"}),e.jsx(d,{children:"Verwalten Sie grundlegende Systemeinstellungen und Parameter"}),e.jsx("div",{className:"flex space-x-4",children:e.jsxs(I,{value:j,onValueChange:U,children:[e.jsx(B,{className:"w-48",children:e.jsx(L,{})}),e.jsxs(Z,{children:[e.jsx(c,{value:"all",children:"Alle Kategorien"}),R.map(s=>e.jsx(c,{value:s,children:s},s))]})]})})]}),e.jsx(o,{children:e.jsx("div",{className:"space-y-6",children:W.map(s=>e.jsxs("div",{className:"grid gap-4 p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{className:"font-medium",children:s.key}),e.jsx(m,{variant:"outline",children:s.category})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]}),e.jsx("div",{className:"flex items-center space-x-2",children:v[s.id]!==void 0&&e.jsx(n,{size:"sm",onClick:()=>Q(s),disabled:E.isPending,children:"Speichern"})})]}),e.jsxs("div",{className:"grid gap-2",children:[$(s),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Zuletzt geändert: ",S(s.lastModified)]})]})]},s.id))})})]})})}),e.jsx(h,{value:"health",children:e.jsx("div",{className:"grid gap-6",children:e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsxs(r,{className:"flex items-center space-x-2",children:[e.jsx(se,{className:"h-5 w-5"}),e.jsx("span",{children:"Systemstatus"}),e.jsxs(m,{className:C[k],variant:"outline",children:[D(k),e.jsx("span",{className:"ml-1 capitalize",children:k})]})]}),e.jsx(d,{children:"Überwachung aller Systemkomponenten und Services"}),e.jsxs(n,{onClick:()=>N.mutate(),disabled:N.isPending,children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),N.isPending?"Prüfe...":"Systemprüfung starten"]})]}),e.jsx(o,{children:e.jsx("div",{className:"grid gap-4",children:f.map((s,t)=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-full ${C[s.status]}`,children:D(s.status)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:s.component}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.message})]})]}),e.jsx(m,{className:C[s.status],variant:"outline",children:s.status})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Verfügbarkeit"}),e.jsx("p",{className:"font-medium",children:s.uptime||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Antwortzeit"}),e.jsx("p",{className:"font-medium",children:s.responseTime?`${s.responseTime}ms`:"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Letzte Prüfung"}),e.jsx("p",{className:"font-medium",children:S(s.lastCheck)})]})]})]},t))})})]})})}),e.jsx(h,{value:"logs",children:e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsx(r,{children:"Systemprotokolle"}),e.jsx(d,{children:"Aktuelle Systemereignisse und Fehlermeldungen"})]}),e.jsx(o,{children:e.jsx("div",{className:"space-y-4",children:_.map(s=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(m,{className:le[s.level],variant:"secondary",children:s.level.toUpperCase()}),e.jsx("span",{className:"font-medium",children:s.message})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:S(s.timestamp)})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mb-2",children:["Komponente: ",s.component]}),s.details&&e.jsx("div",{className:"text-sm bg-muted p-3 rounded",children:s.details})]},s.id))})})]})}),e.jsx(h,{value:"backup",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsx(r,{children:"Backup erstellen"}),e.jsx(d,{children:"Erstellen Sie eine vollständige Sicherung der Systemdaten"})]}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs(V,{children:[e.jsx(g,{className:"h-4 w-4"}),e.jsx(F,{children:"Backups enthalten alle Systemeinstellungen, Benutzerdaten und regulatorische Updates."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(T,{children:"Backup-Typ"}),e.jsxs(I,{defaultValue:"full",children:[e.jsx(B,{children:e.jsx(L,{})}),e.jsxs(Z,{children:[e.jsx(c,{value:"full",children:"Vollständiges Backup"}),e.jsx(c,{value:"settings",children:"Nur Einstellungen"}),e.jsx(c,{value:"data",children:"Nur Daten"})]})]})]}),e.jsxs(n,{className:"w-full",children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Backup erstellen"]})]})]})]}),e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsx(r,{children:"Wiederherstellung"}),e.jsx(d,{children:"System aus vorhandenem Backup wiederherstellen"})]}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs(V,{children:[e.jsx(g,{className:"h-4 w-4"}),e.jsx(F,{children:"Achtung: Die Wiederherstellung überschreibt alle aktuellen Daten."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(T,{children:"Backup-Datei"}),e.jsx(x,{type:"file",accept:".backup,.zip"})]}),e.jsxs(n,{className:"w-full",variant:"destructive",children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Wiederherstellung starten"]})]})]})]})]})})]})]})}export{ge as default};
