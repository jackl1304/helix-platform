import{r as f,g as E,X as I,Y as y,j as e,_ as g,aa as h,B as p,C as n,a as v,b as w,a7 as D,c as l,w as q,x as F,y as P,z as T,E as x,I as R,$ as b,P as k,J as S}from"./index-Dm22qi9h.js";import{F as C}from"./filter-CBkaAuG_.js";const U="http://localhost:3000/api";class ${async request(t,a={}){const d=`${U}${t}`;console.log(`[API] ${a.method||"GET"} ${d}`);const c=await fetch(d,{headers:{"Content-Type":"application/json",Accept:"application/json",...a.headers},...a});if(!c.ok){const m=await c.text();throw new Error(`HTTP ${c.status}: ${m}`)}const o=await c.json();return console.log("[API] Success:",o),o}async getHealth(){return this.request("/health")}async getDashboardStats(){return(await this.request("/dashboard/stats")).data||{}}async getLegalCases(){try{const t=await this.request("/legal-cases"),a=Array.isArray(t)?t:(t==null?void 0:t.data)??t;return Array.isArray(a)?a:a&&typeof a=="object"?[a]:(console.warn("[API] Legal cases data is not an array:",a),[])}catch(t){return console.error("[API] Error fetching legal cases:",t),[]}}async getRegulatoryUpdates(){try{const t=await this.request("/regulatory-updates");return Array.isArray(t.data)?t.data:t.data&&typeof t.data=="object"?[t.data]:(console.warn("[API] Regulatory updates data is not an array:",t.data),[])}catch(t){return console.error("[API] Error fetching regulatory updates:",t),[]}}async getDataSources(){return(await this.request("/data-sources")).data||[]}async getNewsletterSources(){return(await this.request("/newsletter-sources")).data||[]}async getSyncStatus(){return(await this.request("/sync/status")).data||{}}async triggerSync(){return(await this.request("/sync/trigger",{method:"POST"})).data||{}}}const J=new $;function z(){const[r,t]=f.useState(""),[a,d]=f.useState("all"),{data:c=[],isLoading:o,error:m,refetch:N}=E({queryKey:["legal-cases-clean"],queryFn:()=>J.getLegalCases(),staleTime:3e5}),A=I(c),i=y(A,s=>{if(!s||typeof s!="object")return console.warn("[Frontend] Invalid legal case:",s),!1;const u=!r||s.title&&s.title.toLowerCase().includes(r.toLowerCase())||s.caseNumber&&s.caseNumber.toLowerCase().includes(r.toLowerCase())||s.court&&s.court.toLowerCase().includes(r.toLowerCase()),j=a==="all"||s.jurisdiction===a;return u&&j}),L=s=>{switch(s){case"critical":return"bg-red-500";case"high":return"bg-orange-500";case"medium":return"bg-yellow-500";case"low":return"bg-green-500";default:return"bg-gray-500"}};return o?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(g,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("p",{children:"Lade Rechtsfälle..."})]})}):m?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center text-red-600",children:[e.jsx(h,{className:"h-8 w-8 mx-auto mb-4"}),e.jsx("p",{children:"Fehler beim Laden der Rechtsfälle"}),e.jsxs(p,{onClick:()=>N(),className:"mt-4",children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Erneut versuchen"]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(h,{className:"h-8 w-8 text-blue-600"}),"Legal Intelligence Center"]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[i.length," Gerichtsentscheidungen und juristische Präzedenzfälle mit Executive-Analysen"]})]}),e.jsxs(p,{onClick:()=>N(),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Daten synchronisieren"]})]}),e.jsxs(n,{children:[e.jsx(v,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),"Suche & Filter"]})}),e.jsx(l,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Rechtsquelle"}),e.jsxs(q,{value:a,onValueChange:d,children:[e.jsx(F,{children:e.jsx(P,{placeholder:"Alle Jurisdiktionen"})}),e.jsxs(T,{children:[e.jsx(x,{value:"all",children:"Alle Jurisdiktionen"}),e.jsx(x,{value:"Deutschland",children:"Deutschland"}),e.jsx(x,{value:"EU",children:"EU"}),e.jsx(x,{value:"USA",children:"USA"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Suche"}),e.jsx(R,{placeholder:"Fall, Gericht oder Entscheidung suchen...",value:r,onChange:s=>t(s.target.value)})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(p,{variant:"outline",className:"w-full",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Filter anwenden"]})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(n,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Gesamte Fälle"}),e.jsx("p",{className:"text-2xl font-bold",children:i.length})]})]})})}),e.jsx(n,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-5 w-5 bg-orange-500 rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Erkannte Änderungen"}),e.jsx("p",{className:"text-2xl font-bold",children:y(i,s=>s.impactLevel==="high"||s.impactLevel==="critical").length})]})]})})}),e.jsx(n,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-5 w-5 bg-green-500 rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Synchronisation"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"OK"})]})]})})})]}),i.length===0?e.jsx(n,{children:e.jsxs(l,{className:"p-8 text-center",children:[e.jsx(h,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Keine Rechtsfälle gefunden"}),e.jsx("p",{className:"text-gray-600",children:"Keine Daten in der Datenbank verfügbar."})]})}):e.jsx("div",{className:"space-y-4",children:b(i,s=>e.jsxs(n,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(v,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(w,{className:"text-lg",children:s.title}),e.jsx(k,{className:"mt-2",children:e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{children:[e.jsx("strong",{children:"Fallnummer:"})," ",s.caseNumber]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Gericht:"})," ",s.court]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Datum:"})," ",new Date(s.decisionDate).toLocaleDateString("de-DE")]})]})})]}),e.jsx(S,{className:`${L(s.impactLevel)} text-white`,children:s.impactLevel.toUpperCase()})]})}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-700",children:s.summary}),e.jsx("div",{className:"flex flex-wrap gap-2",children:b(s.keywords||[],(u,j)=>e.jsx(S,{variant:"outline",children:u},j))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Finanzielle Auswirkung"}),e.jsx("p",{className:"font-semibold text-green-600",children:s.financialImpact})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Urteil"}),e.jsx("p",{className:"font-semibold text-orange-600",children:s.verdict})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Kosten"}),e.jsx("p",{className:"font-semibold text-blue-600",children:s.costs})]})]})]})})]},s.id))})]})}export{z as default};
