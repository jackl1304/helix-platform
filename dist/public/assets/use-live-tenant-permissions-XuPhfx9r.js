import{r as n,f as S,g}from"./index-Dm22qi9h.js";function w({tenantId:t,pollInterval:o=1e4}){const[a,c]=n.useState(null),[i,u]=n.useState(""),f=S(),m=n.useCallback(async()=>{const e=await fetch(`/api/customer/tenant/${t}`);if(!e.ok)throw new Error(`Failed to fetch tenant data: ${e.status}`);return await e.json()},[t]),{data:s,isLoading:l,error:y,refetch:p}=g({queryKey:["/api/customer/tenant",t],queryFn:m,refetchInterval:o,enabled:!!t,staleTime:5e3,gcTime:3e4});return n.useEffect(()=>{if(s&&typeof s=="object"){const e=s.customerPermissions,r=s.name;e&&JSON.stringify(e)!==JSON.stringify(a)&&(c(e),console.log("[LIVE PERMISSIONS] Updated for tenant:",t,e)),r&&r!==i&&u(r)}},[s,t]),{permissions:a,tenantName:i,isLoading:l,error:y,refetch:()=>{f.invalidateQueries({queryKey:["/api/customer/tenant",t]}),p()}}}export{w as u};
