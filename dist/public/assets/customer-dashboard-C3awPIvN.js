import{e as y,r as W,ap as G,g as J,j as e,U as V,aI as Q,J as m,k,w as Z,x as H,y as X,z as Y,E as g,B as o,aJ as O,N as _,A,S as p,a8 as D,C as r,a as c,b as d,a1 as ee,P as f,c as i,G as se,V as ae,a0 as te,W as S,aj as N,T as le}from"./index-Dm22qi9h.js";import{u as ne}from"./use-live-tenant-permissions-XuPhfx9r.js";import{C as re,L as ie}from"./customer-navigation-B5k3fS1T.js";import{C as L}from"./crown-_04pdp79.js";import{D as ce}from"./download-CQfvf7I6.js";import{T as de}from"./target-D1Y3eE8V.js";import{R as M,C as xe,X as me,Y as oe,T as R,P as ue,a as he,b as ge}from"./PieChart-CylgLYnA.js";import{L as je,a as T}from"./LineChart-BCedZscP.js";import"./clipboard-anxMjb0Z.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=y("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=y("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=y("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),fe="030d3e01-32c4-4f95-8d54-98be948e8d4b",Ne=[{month:"Jan",dataRequests:1850,apiCalls:420},{month:"Feb",dataRequests:2100,apiCalls:380},{month:"Mar",dataRequests:1950,apiCalls:450},{month:"Apr",dataRequests:2300,apiCalls:520},{month:"May",dataRequests:2200,apiCalls:480},{month:"Jun",dataRequests:2400,apiCalls:550},{month:"Jul",dataRequests:2150,apiCalls:490},{month:"Aug",dataRequests:1247,apiCalls:312}],ve=[{region:"USA (FDA)",score:95,alerts:2,trend:"up"},{region:"EU (EMA)",score:88,alerts:5,trend:"stable"},{region:"Asia-Pacific",score:92,alerts:1,trend:"up"}],v=[{name:"USA",value:45,color:"#3B82F6"},{name:"Europa",value:35,color:"#8B5CF6"},{name:"Asien",value:20,color:"#10B981"}];function Ue(){const[w,q]=W.useState("30d"),b=G().tenantId||fe,{permissions:B,tenantName:x,isLoading:I}=ne({tenantId:b,pollInterval:3e3}),s=B||{dashboard:!0,regulatoryUpdates:!0,legalCases:!0,knowledgeBase:!0,newsletters:!0,analytics:!1,reports:!1,dataCollection:!1,globalSources:!1,historicalData:!1,administration:!1,userManagement:!1,systemSettings:!1,auditLogs:!1,aiInsights:!1,advancedAnalytics:!1},{data:a,isLoading:$}=J({queryKey:["/api/customer/dashboard",b,w],queryFn:async()=>({usage:{currentMonth:1247,limit:2500,percentage:50,users:12,userLimit:25,apiCalls:312,apiLimit:1e3},dashboard:{regulatoryUpdates:{total:1247,thisMonth:312,critical:23,regions:{US:498,EU:436,Asia:313}},compliance:{score:92,alerts:8,upcoming:15,resolved:156},analytics:{riskTrend:"decreasing",engagement:89,efficiency:94,dataQuality:98}}})}),u=({title:t,value:l,change:h,changeType:n,icon:F,description:C,color:j="blue"})=>{const z=n==="increase"?e.jsx(pe,{className:"h-3 w-3"}):n==="decrease"?e.jsx(U,{className:"h-3 w-3"}):e.jsx(P,{className:"h-3 w-3"}),K=n==="increase"?"text-green-600":n==="decrease"?"text-red-600":"text-gray-500";return e.jsx(r,{children:e.jsxs(i,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:t}),e.jsx("div",{className:"text-2xl font-bold",children:l}),h&&e.jsxs("p",{className:`text-xs ${K} flex items-center gap-1 mt-1`,children:[z,h]})]}),e.jsx("div",{className:`h-12 w-12 rounded-lg bg-${j}-100 dark:bg-${j}-900/20 flex items-center justify-center`,children:e.jsx(F,{className:`h-6 w-6 text-${j}-600`})})]}),C&&e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:C})]})})},E=({region:t,score:l,alerts:h,trend:n})=>e.jsx(r,{className:"hover:shadow-md transition-shadow",children:e.jsxs(i,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium",children:t}),e.jsxs(m,{className:n==="up"?"bg-green-100 text-green-800":n==="down"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800",children:[n==="up"?e.jsx(le,{className:"w-3 h-3 mr-1"}):n==="down"?e.jsx(U,{className:"w-3 h-3 mr-1"}):e.jsx(P,{className:"w-3 h-3 mr-1"}),n]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Compliance Score"}),e.jsxs("span",{className:"font-medium",children:[l,"%"]})]}),e.jsx(N,{value:l,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[h," aktive Warnungen"]}),e.jsx("span",{children:l>=90?"Excellent":l>=80?"Good":"Needs Attention"})]})]})]})});if($||I)return e.jsx("div",{className:"container mx-auto p-6 space-y-8 max-w-7xl",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((t,l)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded"},l))})]})});const{t:we}=V();return e.jsxs("div",{className:"flex min-h-screen bg-gray-50 dark:bg-gray-900 relative",children:[e.jsx("div",{className:"fixed top-4 right-4 z-50",children:e.jsx(Q,{})}),e.jsx(re,{permissions:s,tenantName:x}),e.jsx("div",{className:"flex-1 ml-64",children:e.jsxs("div",{className:"container mx-auto p-6 space-y-8 max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"Kunden-Dashboard"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 via-purple-600 to-cyan-700 rounded-lg flex items-center justify-center text-white font-bold text-sm",children:(x==null?void 0:x.charAt(0))||"M"}),e.jsx("span",{className:"font-medium",children:x||"MedTech Solutions GmbH"})]}),e.jsxs(m,{className:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-200",children:[e.jsx(L,{className:"w-3 h-3 mr-1"}),"Professional Plan"]}),e.jsxs(m,{className:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200",children:[e.jsx(k,{className:"w-3 h-3 mr-1"}),"Active"]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(Z,{value:w,onValueChange:q,children:[e.jsx(H,{className:"w-32",children:e.jsx(X,{})}),e.jsxs(Y,{children:[e.jsx(g,{value:"7d",children:"7 Tage"}),e.jsx(g,{value:"30d",children:"30 Tage"}),e.jsx(g,{value:"90d",children:"90 Tage"}),e.jsx(g,{value:"12m",children:"12 Monate"})]})]}),e.jsxs(o,{variant:"outline",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Support Chat"]}),e.jsxs(o,{variant:"outline",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Export"]}),e.jsxs(o,{children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"Einstellungen"]}),e.jsxs(o,{variant:"outline",onClick:()=>window.location.href="/login",children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"Abmelden"]})]})]}),(s==null?void 0:s.dashboard)&&e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(u,{title:"Monatliche Nutzung",value:`${a==null?void 0:a.usage.currentMonth.toLocaleString()} / ${a==null?void 0:a.usage.limit.toLocaleString()}`,change:"+8.2%",changeType:"increase",icon:A,description:`${a==null?void 0:a.usage.percentage}% vom Limit verbraucht`,color:"blue"}),e.jsx(u,{title:"Compliance Score",value:`${a==null?void 0:a.dashboard.compliance.score}%`,change:"+2.1%",changeType:"increase",icon:p,description:`${a==null?void 0:a.dashboard.compliance.alerts} aktive Warnungen`,color:"green"}),(s==null?void 0:s.userManagement)&&e.jsx(u,{title:"Aktive Benutzer",value:`${a==null?void 0:a.usage.users} / ${a==null?void 0:a.usage.userLimit}`,change:"Stabil",changeType:"stable",icon:D,description:"Team-Nutzung im Rahmen",color:"purple"}),(s==null?void 0:s.analytics)&&e.jsx(u,{title:"Data Quality",value:`${a==null?void 0:a.dashboard.analytics.dataQuality}%`,change:"+1.3%",changeType:"increase",icon:de,description:"Datenqualität hervorragend",color:"orange"})]}),(s==null?void 0:s.analytics)&&e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(r,{children:[e.jsxs(c,{children:[e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5"}),"Nutzungstrend"]}),e.jsx(f,{children:"Monatliche Datenabfragen und API-Calls"})]}),e.jsx(i,{children:e.jsx(M,{width:"100%",height:300,children:e.jsxs(je,{data:Ne,children:[e.jsx(xe,{strokeDasharray:"3 3"}),e.jsx(me,{dataKey:"month"}),e.jsx(oe,{}),e.jsx(R,{}),e.jsx(T,{type:"monotone",dataKey:"dataRequests",stroke:"#3B82F6",strokeWidth:2}),e.jsx(T,{type:"monotone",dataKey:"apiCalls",stroke:"#8B5CF6",strokeWidth:2})]})})})]}),e.jsxs(r,{children:[e.jsxs(c,{children:[e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5"}),"Regionale Verteilung"]}),e.jsx(f,{children:"Anteil der Updates nach Regionen"})]}),e.jsxs(i,{children:[e.jsx(M,{width:"100%",height:300,children:e.jsxs(ue,{children:[e.jsx(he,{data:v,cx:"50%",cy:"50%",innerRadius:60,outerRadius:120,paddingAngle:5,dataKey:"value",children:v.map((t,l)=>e.jsx(ge,{fill:t.color},`cell-${l}`))}),e.jsx(R,{})]})}),e.jsx("div",{className:"flex justify-center gap-4 mt-4",children:v.map((t,l)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:t.color}}),e.jsx("span",{className:"text-sm",children:t.name})]},l))})]})]})]}),(s==null?void 0:s.regulatoryUpdates)&&e.jsxs(r,{children:[e.jsxs(c,{children:[e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5"}),"Compliance-Übersicht"]}),e.jsx(f,{children:"Regionale Compliance-Scores und aktuelle Warnungen"})]}),e.jsx(i,{children:e.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:ve.map((t,l)=>e.jsx(E,{...t},l))})})]}),((s==null?void 0:s.dashboard)||(s==null?void 0:s.auditLogs))&&e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(r,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-5 w-5"}),"Aktuelle Aktivitäten"]})}),e.jsx(i,{children:e.jsx("div",{className:"space-y-4",children:[{action:"Neue FDA 510(k) Zulassung",time:"2 Stunden",type:"approval",critical:!1},{action:"EU MDR Update verfügbar",time:"5 Stunden",type:"update",critical:!0},{action:"API-Limit zu 75% erreicht",time:"1 Tag",type:"warning",critical:!1},{action:"Compliance-Score aktualisiert",time:"2 Tage",type:"info",critical:!1}].map((t,l)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t.type==="approval"&&e.jsx(k,{className:"h-4 w-4 text-green-500"}),t.type==="update"&&e.jsx(te,{className:"h-4 w-4 text-blue-500"}),t.type==="warning"&&e.jsx(S,{className:"h-4 w-4 text-yellow-500"}),t.type==="info"&&e.jsx(A,{className:"h-4 w-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:t.action}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["vor ",t.time]})]})]}),t.critical&&e.jsx(m,{variant:"destructive",className:"text-xs",children:"Kritisch"})]},l))})})]}),e.jsxs(r,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5"}),"Aktive Warnungen"]})}),e.jsx(i,{children:e.jsx("div",{className:"space-y-4",children:[{title:"EU MDR Deadline approaching",severity:"high",date:"2025-08-15"},{title:"FDA Cybersecurity Requirements",severity:"medium",date:"2025-09-01"},{title:"API Rate Limit Warning",severity:"low",date:"2025-08-12"}].map((t,l)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-950/20 rounded-lg border border-red-200 dark:border-red-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${t.severity==="high"?"bg-red-500":t.severity==="medium"?"bg-yellow-500":"bg-blue-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:t.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Fällig: ",t.date]})]})]}),e.jsx(m,{className:t.severity==="high"?"bg-red-100 text-red-800":t.severity==="medium"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800",children:t.severity})]},l))})})]})]}),((s==null?void 0:s.administration)||(s==null?void 0:s.systemSettings))&&e.jsxs(r,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-5 w-5"}),"Subscription Status"]})}),e.jsx(i,{children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Current Plan: Professional"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Monatliche Updates"}),e.jsxs("span",{className:"text-sm font-medium",children:[a==null?void 0:a.usage.currentMonth," / 2.500"]})]}),e.jsx(N,{value:a==null?void 0:a.usage.percentage}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Team-Mitglieder"}),e.jsxs("span",{className:"text-sm font-medium",children:[(a==null?void 0:a.usage.users)||0," / ",(a==null?void 0:a.usage.userLimit)||0]})]}),e.jsx(N,{value:((a==null?void 0:a.usage.users)||0)/((a==null?void 0:a.usage.userLimit)||1)*100})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Nächste Abrechnung"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Betrag"}),e.jsx("span",{className:"text-lg font-bold",children:"€899"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Datum"}),e.jsx("span",{className:"text-sm font-medium",children:"31.08.2025"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Zahlungsart"}),e.jsx("span",{className:"text-sm",children:"**** 1234"})]})]}),e.jsx(o,{className:"w-full mt-4",variant:"outline",children:"Plan verwalten"})]})]})})]}),!(s!=null&&s.dashboard)&&!(s!=null&&s.analytics)&&!(s!=null&&s.regulatoryUpdates)&&!(s!=null&&s.administration)&&!(s!=null&&s.systemSettings)&&!(s!=null&&s.auditLogs)&&e.jsx(r,{className:"text-center py-12",children:e.jsxs(i,{children:[e.jsx(p,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Zugriff beschränkt"}),e.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"Ihr Administrator hat den Zugriff auf diese Dashboard-Bereiche beschränkt. Kontaktieren Sie Ihren Administrator, um weitere Berechtigungen zu erhalten."})]})})]})})]})}export{Ue as default};
